(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{677:function(e,t,a){"use strict";a.r(t);var v=a(16),i=Object(v.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"设计理念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计理念"}},[e._v("#")]),e._v(" 设计理念")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M00/3A/33/CioPOWB-eOSAG59aAAChoXBKxOY460.png",alt:""}})]),e._v(" "),a("p",[e._v("小程序的渲染层使用 WebView 进行渲染，开发者的 JS 逻辑运行在一个独立的 Jscore 线程中。")]),e._v(" "),a("p",[e._v("渲染层提供了带有数据绑定语法的 WXML，逻辑层提供了setData 等 API，开发者需要更新界面时，通过 setData 把变化的数据传递过去，小程序框架会根据 Dom Diff 的流程把正确的结果更新在 DOM 树上.")]),e._v(" "),a("h2",{attrs:{id:"了解webview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#了解webview"}},[e._v("#")]),e._v(" 了解Webview")]),e._v(" "),a("p",[e._v("，一个小程序有多个界面，所以渲染层对应存在多个webview。这两个线程之间由Native层进行统一处理。无论是线程之间的通讯、数据的传递、网络请求都由Native层做转发。")]),e._v(" "),a("p",[e._v("那么首先有一个问题需要解释，这里的webview是什么呢？")]),e._v(" "),a("p",[e._v("平常我们浏览网页都是在浏览器中，可以想象webview是一个嵌入式的浏览器，是嵌入在原生应用中的。webview 用来展示网页的 view 组件，该组件是你运行自己的浏览器或者在你的线程中展示线上内容的基础。使用 webkit 渲染引擎来展示，并且支持前进后退、浏览历史、放大缩小、等更多功能。")]),e._v(" "),a("p",[e._v("简单来说 webview 是手机中内置了一款高性能 webkit 内核浏览器，在 SDK 中封装的一个组件。不过没有提供地址栏和导航栏，只是单纯的展示一个网页界面。")]),e._v(" "),a("p",[e._v("这里比较容易弄混的概念是iframe，iframe为页面中嵌入页面的方式，有别于webview嵌入原生应用的概念，这里需要注意一下。")]),e._v(" "),a("p",[e._v("紧接上文架构，那么为什么要做多个webview呢，为了更加接近原生应用APP的用户体验。多个webview可以理解为多页面应用，有别于单页面应用SPA，SPA渲染页面是通过路由识别随后动态将页面挂载到root节点中去，如果单页面应用打开一个新的页面，需要先卸载掉当前页面结构，并且重新渲染。很显然原生APP并不是这个样子，比较明显的特征为从页面右侧向左划入一个新的页面，并且我们可以同时看到两个页面。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30c6be2899f744019b3f3297db583558~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp?",alt:""}})]),e._v(" "),a("p",[e._v("多页面应用就很好达到这个效果，新页面直接滑动出来并且覆盖在旧页面上即可，这也是小程序现在所做的形式。这样的用户体验是非常好的。")]),e._v(" "),a("h2",{attrs:{id:"推荐阅读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推荐阅读"}},[e._v("#")]),e._v(" 推荐阅读")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/book/6982013809212784676",target:"_blank",rel:"noopener noreferrer"}},[e._v("微信小程序底层框架实现原理"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=i.exports}}]);