(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{701:function(t,s,a){"use strict";a.r(s);var n=a(16),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0c508c2fb5434f4891d4edc2e9f2e44f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"站点体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#站点体验"}},[t._v("#")]),t._v(" 站点体验")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71cb8e5d5cfc4959a0a8ec8b27742ba1~tplv-k3u1fbpfcp-watermark.awebp",alt:""}})]),t._v(" "),a("p",[t._v("首先，从站点体验方面来讲，Web Vitals 定义了 LCP、FID、CLS 指标，成为了业界主流的标准。")]),t._v(" "),a("ul",[a("li",[t._v("LCP（加载）")])]),t._v(" "),a("p",[t._v("最大内容绘制，是用来测量加载的性能。这个指标上报视口中可见的最大图像或文本块的渲染的时间点，为了提供良好的用户体验，LCP 分数最好保证在 2.5 秒以内。")]),t._v(" "),a("ul",[a("li",[t._v("FID（可交互性）")])]),t._v(" "),a("p",[t._v("第一次输入延迟，用于测量可交互性。FID 衡量的是从用户第一次与页面交互（例如，当他们点击链接，点击按钮，或使用自定义的 JavaScript 驱动的控件）到浏览器实际能够开始响应该交互的时间，为了提供良好的用户体验，站点应该努力使 FID 保持在 100 毫秒以内。")]),t._v(" "),a("ul",[a("li",[t._v("CLS（视觉稳定性）")])]),t._v(" "),a("p",[t._v("累计布局位移，用于测量视觉稳定性。CLS 是衡量页面的整个生命周期中，发生的每次布局变化中的最大幅度的布局变化得分的指标。为了提供良好的用户体验，站点应该努力使 CLS 分数达到 0.1 或更低。")]),t._v(" "),a("h2",{attrs:{id:"采集指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#采集指标"}},[t._v("#")]),t._v(" 采集指标")]),t._v(" "),a("h3",{attrs:{id:"rum-real-user-monitoring-指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rum-real-user-monitoring-指标"}},[t._v("#")]),t._v(" RUM (Real User Monitoring) 指标")]),t._v(" "),a("ul",[a("li",[t._v("包括 FP, TTI, FCP, FMP, FID, MPFID。")])]),t._v(" "),a("p",[t._v("RUM 指标的采集，主要依赖于 Event Timing API 进行测量。")]),t._v(" "),a("p",[t._v("以 FID 指标为例，先创建 PerformanceObserver 对象，监听 first-input 事件监听到 first-input 事件后，利用 Event Timing API，通过事件的开始处理时间，减去事件的发生时间，即为FID。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PerformanceObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" entry "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FID")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("processingStart "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FID:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Start observing first-input entries.")]),t._v("\nobserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first-input'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("buffered")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("真实用户性能指标也就是上文有所提及的 RUM 以及平台自己扩展的一些额外的指标，包括以下指标：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("首次绘制时间（ FP ） ：即 First Paint，为首次渲染的时间点。")])]),t._v(" "),a("li",[a("p",[t._v("首次内容绘制时间（ FCP ） ：即 First Contentful Paint，为首次有内容渲染的时间点。")])]),t._v(" "),a("li",[a("p",[t._v("首次有效绘制时间（ FMP ） ：用户启动页面加载与页面呈现首屏之间的时间。")])]),t._v(" "),a("li",[a("p",[t._v("首次交互时间（ FID ） ：即 First Input Delay，记录页面加载阶段，用户首次交互操作的延时时间。FID指标影响用户对页面交互性和响应性的第一印象。")])]),t._v(" "),a("li",[a("p",[t._v("交互中最大延时（ MPFID ） ：页面加载阶段，用户交互操作可能遇到的最大延时时间。")])]),t._v(" "),a("li",[a("p",[t._v("完全可交互时间（TTI）：即 Time to interactive，记录从页面加载开始，到页面处于完全可交互状态所花费的时间。")])]),t._v(" "),a("li",[a("p",[t._v("首次加载跳出率：第一个页面完全加载前用户跳出率。")])]),t._v(" "),a("li",[a("p",[t._v("慢开比：完全加载耗时超过 5s 的 PV 占比。")])])]),t._v(" "),a("h3",{attrs:{id:"navigation-timing-各阶段指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#navigation-timing-各阶段指标"}},[t._v("#")]),t._v(" Navigation Timing 各阶段指标")]),t._v(" "),a("ul",[a("li",[t._v("包括 DNS, TCP, DOM 解析等阶段的指标。")])]),t._v(" "),a("p",[t._v("Navigation Timing 指标，可以通过 PerformanceTiming 接口得到它们，以加载时间的计算为例：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onLoad")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" now "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" page_load_time "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" now "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" performance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User-perceived page loading time: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" page_load_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("ul",[a("li",[a("p",[t._v("不重复的耗时时段区分：")]),t._v(" "),a("ul",[a("li",[t._v("重定向耗时: redirectEnd - redirectStart")]),t._v(" "),a("li",[t._v("DNS 解析耗时: domainLookupEnd - domainLookupStart")]),t._v(" "),a("li",[t._v("TCP 连接耗时: connectEnd - connectStart")]),t._v(" "),a("li",[t._v("SSL 安全连接耗时: connectEnd - secureConnectionStart")]),t._v(" "),a("li",[t._v("网络请求耗时 (TTFB): responseStart - requestStart")]),t._v(" "),a("li",[t._v("HTML 下载耗时：responseEnd - responseStart")]),t._v(" "),a("li",[t._v("DOM 解析耗时: domInteractive - responseEnd")]),t._v(" "),a("li",[t._v("资源加载耗时: loadEventStart - domContentLoadedEventEnd")])])]),t._v(" "),a("li",[a("p",[t._v("其他组合分析：")]),t._v(" "),a("ul",[a("li",[t._v("白屏时间: domLoading - fetchStart")]),t._v(" "),a("li",[t._v("粗略首屏时间: loadEventEnd - fetchStart 或者 domInteractive - fetchStart")]),t._v(" "),a("li",[t._v("DOM Ready 时间: domContentLoadEventEnd - fetchStart")]),t._v(" "),a("li",[t._v("页面完全加载时间: loadEventStart - fetchStart")])])])]),t._v(" "),a("h2",{attrs:{id:"performance-api-能收集的指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#performance-api-能收集的指标"}},[t._v("#")]),t._v(" Performance API 能收集的指标")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("performance.navigation: 页面是加载还是刷新、发生了多少次重定向")])]),t._v(" "),a("li",[a("p",[t._v("performance.timing: 页面加载的各阶段时长")])]),t._v(" "),a("li",[a("p",[t._v("performance.memory 内存使用情况")])])]),t._v(" "),a("ul",[a("li",[t._v("基于 performance 我们可以测量如下几个方面：\nmark、measure、navigation、resource、paint、frame。")])]),t._v(" "),a("p",[t._v("let p = window.performance.getEntries();")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("重定向次数：performance.navigation.redirectCount")])]),t._v(" "),a("li",[a("p",[t._v('JS 资源数量：p.filter(ele => ele.initiatorType === "script").length')])]),t._v(" "),a("li",[a("p",[t._v('CSS 资源数量：p.filter(ele => ele.initiatorType === "css").length')])]),t._v(" "),a("li",[a("p",[t._v('AJAX 请求数量：p.filter(ele => ele.initiatorType === "xmlhttprequest").length')])]),t._v(" "),a("li",[a("p",[t._v('IMG 资源数量：p.filter(ele => ele.initiatorType === "img").length')])]),t._v(" "),a("li",[a("p",[t._v('总资源数量: window.performance.getEntriesByType("resource").length')])]),t._v(" "),a("li",[a("p",[t._v("不重复的耗时时段区分：")]),t._v(" "),a("ul",[a("li",[t._v("重定向耗时: redirectEnd - redirectStart")]),t._v(" "),a("li",[t._v("DNS 解析耗时: domainLookupEnd - domainLookupStart")]),t._v(" "),a("li",[t._v("TCP 连接耗时: connectEnd - connectStart")]),t._v(" "),a("li",[t._v("SSL 安全连接耗时: connectEnd - secureConnectionStart")]),t._v(" "),a("li",[t._v("网络请求耗时 (TTFB): responseStart - requestStart")]),t._v(" "),a("li",[t._v("HTML 下载耗时：responseEnd - responseStart")]),t._v(" "),a("li",[t._v("DOM 解析耗时: domInteractive - responseEnd")]),t._v(" "),a("li",[t._v("资源加载耗时: loadEventStart - domContentLoadedEventEnd")])])]),t._v(" "),a("li",[a("p",[t._v("其他组合分析：")]),t._v(" "),a("ul",[a("li",[t._v("白屏时间: domLoading - fetchStart")]),t._v(" "),a("li",[t._v("粗略首屏时间: loadEventEnd - fetchStart 或者 domInteractive - fetchStart")]),t._v(" "),a("li",[t._v("DOM Ready 时间: domContentLoadEventEnd - fetchStart")]),t._v(" "),a("li",[t._v("页面完全加载时间: loadEventStart - fetchStart")])])]),t._v(" "),a("li",[a("p",[t._v("JS 总加载耗时:")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("performance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cssR "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ele")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("initiatorType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nMath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("cssR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ele")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("min")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("cssR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ele")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("CSS 总加载耗时:")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("performance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cssR "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ele")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("initiatorType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nMath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("cssR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ele")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("min")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("cssR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ele")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"performanceobserver-能收集的指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#performanceobserver-能收集的指标"}},[t._v("#")]),t._v(" PerformanceObserver 能收集的指标")]),t._v(" "),a("p",[t._v("首次绘制时间（ FP ） ：即 First Paint，为首次渲染的时间点。")]),t._v(" "),a("p",[t._v("首次内容绘制时间（ FCP ） ：即 First Contentful Paint，为首次有内容渲染的时间点。")]),t._v(" "),a("p",[t._v("首次有效绘制时间（ FMP ） ：用户启动页面加载与页面呈现首屏之间的时间。")]),t._v(" "),a("p",[t._v("首次交互时间（ FID ） ：即 First Input Delay，记录页面加载阶段，用户首次交互操作的延时时间。FID指标影响用户对页面交互性和响应性的第一印象。")]),t._v(" "),a("p",[t._v("交互中最大延时（ MPFID ） ：页面加载阶段，用户交互操作可能遇到的最大延时时间。")]),t._v(" "),a("p",[t._v("完全可交互时间（TTI）：即 Time to interactive，记录从页面加载开始，到页面处于完全可交互状态所花费的时间。")]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/7052918009555320839#heading-7",target:"_blank",rel:"noopener noreferrer"}},[t._v("最全的前端性能定位总结"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://woai3c.gitee.io/introduction-to-front-end-engineering/07.html#%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86",target:"_blank",rel:"noopener noreferrer"}},[t._v("带你入门前端工程-谭志光"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/6936562262480158728#heading-6",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端监控体系及实现技术详解"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/84XYEr0-USG5fFm-AFwfFQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何进行 web 性能监控"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/7000728875676205086#heading-5",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入浅出 Performance 工具 & API"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);