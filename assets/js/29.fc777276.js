(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{445:function(a,t,s){"use strict";s.r(t);var n=s(16),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"javascript-å†…å­˜ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript-å†…å­˜ç®¡ç†"}},[a._v("#")]),a._v(" JavaScript å†…å­˜ç®¡ç†")]),a._v(" "),s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[a._v("#")]),a._v(" å‰è¨€")]),a._v(" "),s("p",[a._v("åƒ C è¯­è¨€è¿™æ ·çš„åº•å±‚è¯­è¨€ä¸€èˆ¬éƒ½æœ‰åº•å±‚çš„å†…å­˜ç®¡ç†æ¥å£ï¼Œæ¯”å¦‚ malloc()å’Œ free()ã€‚å¦ä¸€æ–¹é¢ï¼ŒJavaScript åˆ›å»ºå˜é‡ï¼ˆå¯¹è±¡ï¼Œå­—ç¬¦ä¸²ç­‰ï¼‰æ—¶åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”åœ¨ä¸å†ä½¿ç”¨å®ƒä»¬æ—¶â€œè‡ªåŠ¨â€é‡Šæ”¾ã€‚ åä¸€ä¸ªè¿‡ç¨‹ç§°ä¸ºåƒåœ¾å›æ”¶ã€‚è¿™ä¸ªâ€œè‡ªåŠ¨â€æ˜¯æ··ä¹±çš„æ ¹æºï¼Œå¹¶è®© JavaScriptï¼ˆå’Œå…¶ä»–é«˜çº§è¯­è¨€ï¼‰å¼€å‘è€…æ„Ÿè§‰ä»–ä»¬å¯ä»¥ä¸å…³å¿ƒå†…å­˜ç®¡ç†ï¼Œè¿™æ˜¯é”™è¯¯çš„ã€‚")]),a._v(" "),s("blockquote",[s("p",[a._v("æœ¬æ–‡ä¸»è¦å‚è€ƒäº†æ·±å…¥æµ…å‡º nodejs ä¸­çš„å†…å­˜ç« èŠ‚")])]),a._v(" "),s("h2",{attrs:{id:"å†…å­˜æ¨¡å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜æ¨¡å‹"}},[a._v("#")]),a._v(" å†…å­˜æ¨¡å‹")]),a._v(" "),s("p",[a._v("å¹³æ—¶æˆ‘ä»¬ä½¿ç”¨çš„åŸºæœ¬ç±»å‹æ•°æ®æˆ–è€…å¤æ‚ç±»å‹æ•°æ®éƒ½æ˜¯å¦‚ä½•å­˜æ”¾çš„å‘¢ï¼Ÿ")]),a._v(" "),s("p",[a._v("åŸºæœ¬ç±»å‹æ™®éè¢«å­˜æ”¾åœ¨ã€æ ˆã€ä¸­ï¼Œè€Œå¤æ‚ç±»å‹æ˜¯è¢«å­˜æ”¾åœ¨å †å†…å­˜çš„ã€‚")]),a._v(" "),s("blockquote",[s("p",[a._v("å¦‚æœä½ ä¸äº†è§£æ‰§è¡Œæ ˆå’Œå†…å­˜å †çš„æ¦‚å¿µï¼Œè¯·å…ˆé˜…è¯»"),s("RouterLink",{attrs:{to:"/11-JavaScript/04-JavaScriptè¿è¡Œæœºåˆ¶/memory.html#mechanism.html"}},[a._v("JavaScript æ‰§è¡Œæœºåˆ¶")])],1)]),a._v(" "),s("p",[a._v("å½“ä½ è¯»å®Œä¸Šè¿°æ–‡ç« åï¼Œä½ ä¼šé—®ï¼Œæ—¢ç„¶å¤æ‚ç±»å‹è¢«å­˜æ”¾åœ¨å†…å­˜å †ä¸­ï¼Œæ‰§è¡Œæ ˆçš„å‡½æ•°æ˜¯å¦‚ä½•ä½¿ç”¨å†…å­˜å †çš„å¤æ‚ç±»å‹ï¼Ÿ")]),a._v(" "),s("p",[a._v("å®é™…ä¸Šï¼Œæ‰§è¡Œæ ˆçš„å‡½æ•°ä¸Šä¸‹æ–‡ä¼šä¿å­˜ä¸€ä¸ªå†…å­˜å †å¯¹åº”å¤æ‚ç±»å‹å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œé€šè¿‡å¼•ç”¨æ¥ä½¿ç”¨å¤æ‚ç±»å‹å¯¹è±¡ã€‚")]),a._v(" "),s("p",[a._v("ä¸€ä¸ªä¾‹å­:")]),a._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("num")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" sum "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("ç¤ºæ„å›¾å¦‚ä¸‹(æˆ‘ä»¬æš‚æ—¶ä¸è€ƒè™‘å‡½æ•°æœ¬èº«çš„å†…å­˜)\n"),s("img",{attrs:{src:"https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/8f09ef156288fd2c9ee9b0b0296fd154.png",alt:"2019-06-20-12-38-57"}})]),a._v(" "),s("p",[a._v("è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯å¦æ‰€æœ‰çš„åŸºæœ¬ç±»å‹éƒ½å‚¨å­˜åœ¨æ ˆä¸­å‘¢ï¼Ÿ")]),a._v(" "),s("p",[a._v("å¹¶ä¸æ˜¯ï¼Œå½“ä¸€ä¸ªåŸºæœ¬ç±»å‹è¢«é—­åŒ…å¼•ç”¨ä¹‹åï¼Œå°±å¯ä»¥é•¿æœŸå­˜åœ¨äºå†…å­˜ä¸­ï¼Œè¿™ä¸ªæ—¶å€™å³ä½¿ä»–æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¹Ÿæ˜¯ä¼šè¢«å­˜æ”¾åœ¨å †ä¸­çš„ã€‚")]),a._v(" "),s("h2",{attrs:{id:"ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿå‘½å‘¨æœŸ"}},[a._v("#")]),a._v(" ç”Ÿå‘½å‘¨æœŸ")]),a._v(" "),s("p",[a._v("ä¸ç®¡ä»€ä¹ˆç¨‹åºè¯­è¨€ï¼Œå†…å­˜ç”Ÿå‘½å‘¨æœŸåŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼š")]),a._v(" "),s("ol",[s("li",[a._v("åˆ†é…ä½ æ‰€éœ€è¦çš„å†…å­˜")]),a._v(" "),s("li",[a._v("ä½¿ç”¨åˆ†é…åˆ°çš„å†…å­˜ï¼ˆè¯»ã€å†™ï¼‰")]),a._v(" "),s("li",[a._v("ä¸éœ€è¦æ—¶å°†å…¶é‡Šæ”¾\\å½’è¿˜")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/b9f8c025986dee6a49599c985cd15f2e.png",alt:"2019-06-20-12-18-16"}})]),a._v(" "),s("p",[a._v("æ‰€æœ‰è¯­è¨€ç¬¬äºŒéƒ¨åˆ†éƒ½æ˜¯æ˜ç¡®çš„ã€‚ç¬¬ä¸€å’Œç¬¬ä¸‰éƒ¨åˆ†åœ¨åº•å±‚è¯­è¨€ä¸­æ˜¯æ˜ç¡®çš„ï¼Œä½†åœ¨åƒ JavaScript è¿™äº›é«˜çº§è¯­è¨€ä¸­ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯éšå«çš„ã€‚")]),a._v(" "),s("h2",{attrs:{id:"å†…å­˜å›æ”¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜å›æ”¶"}},[a._v("#")]),a._v(" å†…å­˜å›æ”¶")]),a._v(" "),s("p",[a._v("V8 çš„åƒåœ¾å›æ”¶ç­–ç•¥åŸºäºåˆ†ä»£å›æ”¶æœºåˆ¶ï¼Œè¯¥æœºåˆ¶åˆåŸºäº"),s("strong",[a._v("ä¸–ä»£å‡è¯´")]),a._v(",è¯¥å‡è¯´æœ‰ä¸¤ä¸ªç‰¹ç‚¹:")]),a._v(" "),s("ul",[s("li",[a._v("å¤§éƒ¨åˆ†æ–°ç”Ÿå¯¹è±¡å€¾å‘äºæ—©æ­»")]),a._v(" "),s("li",[a._v("ä¸æ­»çš„å¯¹è±¡ï¼Œä¼šæ´»å¾—æ›´ä¹…")])]),a._v(" "),s("p",[a._v("åŸºäºè¿™ä¸ªç†è®ºï¼Œç°ä»£åƒåœ¾å›æ”¶ç®—æ³•æ ¹æ®å¯¹è±¡çš„å­˜æ´»æ—¶é—´å°†å†…å­˜è¿›è¡Œäº†åˆ†ä»£ï¼Œå¹¶å¯¹ä¸åŒåˆ†ä»£çš„å†…å­˜é‡‡ç”¨ä¸åŒçš„é«˜æ•ˆç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶")]),a._v(" "),s("h3",{attrs:{id:"v8-çš„å†…å­˜åˆ†ä»£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v8-çš„å†…å­˜åˆ†ä»£"}},[a._v("#")]),a._v(" V8 çš„å†…å­˜åˆ†ä»£")]),a._v(" "),s("p",[a._v("åœ¨ V8 ä¸­ï¼Œå°†å†…å­˜åˆ†ä¸ºäº†æ–°ç”Ÿä»£ï¼ˆnew spaceï¼‰å’Œè€ç”Ÿä»£ï¼ˆold spaceï¼‰ã€‚å®ƒä»¬ç‰¹ç‚¹å¦‚ä¸‹ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("æ–°ç”Ÿä»£ï¼šå¯¹è±¡çš„å­˜æ´»æ—¶é—´è¾ƒçŸ­ã€‚æ–°ç”Ÿå¯¹è±¡æˆ–åªç»è¿‡ä¸€æ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡ã€‚")]),a._v(" "),s("li",[a._v("è€ç”Ÿä»£ï¼šå¯¹è±¡å­˜æ´»æ—¶é—´è¾ƒé•¿ã€‚ç»å†è¿‡ä¸€æ¬¡æˆ–å¤šæ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡ã€‚")])]),a._v(" "),s("h3",{attrs:{id:"stop-the-world-å…¨åœé¡¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stop-the-world-å…¨åœé¡¿"}},[a._v("#")]),a._v(" Stop The World ï¼ˆå…¨åœé¡¿ï¼‰")]),a._v(" "),s("p",[a._v("åœ¨ä»‹ç»åƒåœ¾å›æ”¶ç®—æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ã€Œå…¨åœé¡¿ã€ã€‚")]),a._v(" "),s("p",[a._v("ä¸ºé¿å…åº”ç”¨é€»è¾‘ä¸åƒåœ¾å›æ”¶å™¨çœ‹åˆ°çš„æƒ…å†µä¸ä¸€è‡´ï¼Œåƒåœ¾å›æ”¶ç®—æ³•åœ¨æ‰§è¡Œæ—¶ï¼Œéœ€è¦åœæ­¢åº”ç”¨é€»è¾‘ã€‚åƒåœ¾å›æ”¶ç®—æ³•åœ¨æ‰§è¡Œå‰ï¼Œéœ€è¦å°†åº”ç”¨é€»è¾‘æš‚åœï¼Œæ‰§è¡Œå®Œåƒåœ¾å›æ”¶åå†æ‰§è¡Œåº”ç”¨é€»è¾‘ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸º ã€Œå…¨åœé¡¿ã€ï¼ˆStop The Worldï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€æ¬¡ GC éœ€è¦ 50msï¼Œåº”ç”¨é€»è¾‘å°±ä¼šæš‚åœ 50msã€‚")]),a._v(" "),s("h3",{attrs:{id:"scavenge-ç®—æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scavenge-ç®—æ³•"}},[a._v("#")]),a._v(" Scavenge ç®—æ³•")]),a._v(" "),s("p",[a._v("Scavenge ç®—æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œå®ƒçš„ç®—æ³•æœºåˆ¶å†³å®šäº†åªèƒ½åˆ©ç”¨ä¸€åŠçš„å†…å­˜ç©ºé—´ã€‚ä½†æ˜¯æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç”Ÿå­˜å‘¨æœŸçŸ­ã€å­˜æ´»å¯¹è±¡å°‘ï¼Œè¿›è¡Œå¯¹è±¡å¤åˆ¶çš„æˆæœ¬ä¸æ˜¯å¾ˆé«˜ï¼Œå› è€Œéå¸¸é€‚åˆè¿™ç§åœºæ™¯ã€‚")]),a._v(" "),s("p",[a._v("æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸»è¦é€šè¿‡ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚Scavenge çš„å…·ä½“å®ç°ï¼Œä¸»è¦é‡‡ç”¨äº† Cheney ç®—æ³•ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/b883571872f75fcf0157377003f57cf2.png",alt:"2019-06-20-12-51-06"}})]),a._v(" "),s("p",[a._v("Cheney ç®—æ³•é‡‡ç”¨å¤åˆ¶çš„æ–¹å¼è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å®ƒå°†å †å†…å­˜ä¸€åˆ†ä¸ºäºŒï¼Œæ¯ä¸€éƒ¨åˆ†ç©ºé—´ç§°ä¸º semispaceã€‚è¿™ä¸¤ä¸ªç©ºé—´ï¼Œåªæœ‰ä¸€ä¸ªç©ºé—´å¤„äºä½¿ç”¨ä¸­ï¼Œå¦ä¸€ä¸ªåˆ™å¤„äºé—²ç½®ã€‚ä½¿ç”¨ä¸­çš„ semispace ç§°ä¸º ã€ŒFrom ç©ºé—´ã€ï¼Œé—²ç½®çš„ semispace ç§°ä¸º ã€ŒTo ç©ºé—´ã€ã€‚")]),a._v(" "),s("p",[a._v("è¿‡ç¨‹å¦‚ä¸‹ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("ä» From ç©ºé—´åˆ†é…å¯¹è±¡ï¼Œè‹¥ semispace è¢«åˆ†é…æ»¡ï¼Œåˆ™æ‰§è¡Œ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚")]),a._v(" "),s("li",[a._v("æ£€æŸ¥ From ç©ºé—´çš„å­˜æ´»å¯¹è±¡ï¼Œè‹¥å¯¹è±¡å­˜æ´»ï¼Œåˆ™æ£€æŸ¥å¯¹è±¡æ˜¯å¦ç¬¦åˆæ™‹å‡æ¡ä»¶ï¼Œè‹¥ç¬¦åˆæ¡ä»¶åˆ™æ™‹å‡åˆ°è€ç”Ÿä»£ï¼Œå¦åˆ™å°†å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ° To ç©ºé—´ã€‚")]),a._v(" "),s("li",[a._v("è‹¥å¯¹è±¡ä¸å­˜æ´»ï¼Œåˆ™é‡Šæ”¾ä¸å­˜æ´»å¯¹è±¡çš„ç©ºé—´ã€‚")]),a._v(" "),s("li",[a._v("å®Œæˆå¤åˆ¶åï¼Œå°† From ç©ºé—´ä¸ To ç©ºé—´è¿›è¡Œè§’è‰²ç¿»è½¬ï¼ˆflipï¼‰ã€‚")])]),a._v(" "),s("h3",{attrs:{id:"å¯¹è±¡æ™‹å‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹è±¡æ™‹å‡"}},[a._v("#")]),a._v(" å¯¹è±¡æ™‹å‡")]),a._v(" "),s("ol",[s("li",[a._v("å¯¹è±¡æ˜¯å¦ç»å†è¿‡ Scavenge å›æ”¶ã€‚å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶ To ç©ºé—´æ—¶ï¼Œä¼šæ£€æŸ¥å¯¹è±¡çš„å†…å­˜åœ°å€æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²ç»ç»è¿‡ä¸€æ¬¡ Scavenge å›æ”¶ã€‚è‹¥ç»å†è¿‡ï¼Œåˆ™å°†å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ°è€ç”Ÿä»£ä¸­ï¼›è‹¥æ²¡æœ‰ç»å†ï¼Œåˆ™å¤åˆ¶åˆ° To ç©ºé—´ã€‚")]),a._v(" "),s("li",[a._v("To ç©ºé—´çš„å†…å­˜ä½¿ç”¨å æ¯”æ˜¯å¦è¶…è¿‡é™åˆ¶ã€‚å½“å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ° To ç©ºé—´æ—¶ï¼Œè‹¥ To ç©ºé—´ä½¿ç”¨è¶…è¿‡ 25%ï¼Œåˆ™å¯¹è±¡ç›´æ¥æ™‹å‡åˆ°è€ç”Ÿä»£ä¸­ã€‚è®¾ç½®ä¸º 25%çš„æ¯”ä¾‹çš„åŸå› æ˜¯ï¼Œå½“å®Œæˆ Scavenge å›æ”¶åï¼ŒTo ç©ºé—´å°†ç¿»è½¬æˆ From ç©ºé—´ï¼Œç»§ç»­è¿›è¡Œå¯¹è±¡å†…å­˜çš„åˆ†é…ã€‚è‹¥å æ¯”è¿‡å¤§ï¼Œå°†å½±å“åç»­å†…å­˜åˆ†é…ã€‚")])]),a._v(" "),s("p",[a._v("å¯¹è±¡æ™‹å‡åˆ°è€ç”Ÿä»£åï¼Œå°†æ¥å—æ–°çš„åƒåœ¾å›æ”¶ç®—æ³•å¤„ç†ã€‚ä¸‹å›¾ä¸º Scavenge ç®—æ³•ä¸­ï¼Œå¯¹è±¡æ™‹å‡æµç¨‹å›¾ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/7d503b3c8b7619b0a4cceb34594fea03.png",alt:"2019-06-20-12-52-37"}})]),a._v(" "),s("h3",{attrs:{id:"mark-sweep-mark-compact"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mark-sweep-mark-compact"}},[a._v("#")]),a._v(" Mark-Sweep & Mark-Compact")]),a._v(" "),s("p",[a._v("è€ç”Ÿä»£ä¸­çš„å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œç¬¬ä¸€æ˜¯å­˜æ´»å¯¹è±¡å¤šï¼Œç¬¬äºŒä¸ªå­˜æ´»æ—¶é—´é•¿ã€‚è‹¥åœ¨è€ç”Ÿä»£ä¸­ä½¿ç”¨ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå°†ä¼šå¯¼è‡´å¤åˆ¶å­˜æ´»å¯¹è±¡çš„æ•ˆç‡ä¸é«˜ï¼Œä¸”è¿˜ä¼šæµªè´¹ä¸€åŠçš„ç©ºé—´ã€‚å› è€Œï¼ŒV8 åœ¨è€ç”Ÿä»£é‡‡ç”¨ Mark-Sweep å’Œ Mark-Compact ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚")]),a._v(" "),s("p",[a._v("Mark-Sweepï¼Œæ˜¯æ ‡è®°æ¸…é™¤çš„æ„æ€ã€‚å®ƒä¸»è¦åˆ†ä¸ºæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªé˜¶æ®µã€‚")]),a._v(" "),s("ul",[s("li",[a._v("æ ‡è®°é˜¶æ®µï¼Œå®ƒå°†éå†å †ä¸­æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶å¯¹å­˜æ´»çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼›")]),a._v(" "),s("li",[a._v("æ¸…é™¤é˜¶æ®µï¼Œå¯¹æœªæ ‡è®°å¯¹è±¡çš„ç©ºé—´è¿›è¡Œå›æ”¶ã€‚")])]),a._v(" "),s("p",[a._v("ä¸ Scavenge ç®—æ³•ä¸åŒï¼ŒMark-Sweep ä¸ä¼šå¯¹å†…å­˜ä¸€åˆ†ä¸ºäºŒï¼Œå› æ­¤ä¸ä¼šæµªè´¹ç©ºé—´ã€‚ä½†æ˜¯ï¼Œç»å†è¿‡ä¸€æ¬¡ Mark-Sweep ä¹‹åï¼Œå†…å­˜çš„ç©ºé—´å°†ä¼šå˜å¾—ä¸è¿ç»­ï¼Œè¿™æ ·ä¼šå¯¹åç»­å†…å­˜åˆ†é…é€ æˆé—®é¢˜ã€‚æ¯”å¦‚ï¼Œå½“éœ€è¦åˆ†é…ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡æ—¶ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªç¢ç‰‡å†…æ”¯æŒåˆ†é…ï¼Œè¿™å°†æå‰è§¦å‘ä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œå°½ç®¡è¿™æ¬¡åƒåœ¾å›æ”¶æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/805b5b5cf48dc8299f7a8093fa2d4080.png",alt:"2019-06-20-12-55-15"}})]),a._v(" "),s("p",[a._v("ä¸ºäº†è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œæé«˜å¯¹å†…å­˜çš„åˆ©ç”¨ï¼Œå¼•å…¥äº† Mark-Compact ï¼ˆæ ‡è®°æ•´ç†ï¼‰ç®—æ³•ã€‚Mark-Compact æ˜¯åœ¨ Mark-Sweep ç®—æ³•ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œæ ‡è®°é˜¶æ®µä¸ Mark-Sweep ç›¸åŒï¼Œä½†æ˜¯å¯¹æœªæ ‡è®°çš„å¯¹è±¡å¤„ç†æ–¹å¼ä¸åŒã€‚ä¸ Mark-Sweep æ˜¯å¯¹æœªæ ‡è®°çš„å¯¹è±¡ç«‹å³è¿›è¡Œå›æ”¶ï¼ŒMark-Compact åˆ™æ˜¯å°†å­˜æ´»çš„å¯¹è±¡ç§»åŠ¨åˆ°ä¸€è¾¹ï¼Œç„¶åå†æ¸…ç†ç«¯è¾¹ç•Œå¤–çš„å†…å­˜ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/847849c83fe8b3d4fea20017b28ef89b.png",alt:"2019-06-20-12-55-47"}})]),a._v(" "),s("p",[a._v("ç”±äº Mark-Compact éœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥æ‰§è¡Œé€Ÿåº¦ä¸Šï¼Œæ¯” Mark-Sweep è¦æ…¢ã€‚æ‰€ä»¥ï¼ŒV8 ä¸»è¦ä½¿ç”¨ Mark-Sweep ç®—æ³•ï¼Œç„¶ååœ¨å½“ç©ºé—´å†…å­˜åˆ†é…ä¸è¶³æ—¶ï¼Œé‡‡ç”¨ Mark-Compact ç®—æ³•ã€‚")]),a._v(" "),s("h3",{attrs:{id:"incremental-marking-å¢é‡æ ‡è®°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#incremental-marking-å¢é‡æ ‡è®°"}},[a._v("#")]),a._v(" Incremental Markingï¼ˆå¢é‡æ ‡è®°ï¼‰")]),a._v(" "),s("p",[a._v("åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œç”±äºå­˜æ´»å¯¹è±¡å°‘ï¼Œåƒåœ¾å›æ”¶æ•ˆç‡é«˜ï¼Œå…¨åœé¡¿æ—¶é—´çŸ­ï¼Œé€ æˆçš„å½±å“å°ã€‚ä½†æ˜¯è€ç”Ÿä»£ä¸­ï¼Œå­˜æ´»å¯¹è±¡å¤šï¼Œåƒåœ¾å›æ”¶æ—¶é—´é•¿ï¼Œå…¨åœé¡¿é€ æˆçš„å½±å“å¤§ã€‚ä¸ºäº†å‡å°‘å…¨åœé¡¿çš„æ—¶é—´ï¼ŒV8 å¯¹æ ‡è®°è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå°†ä¸€æ¬¡åœé¡¿è¿›è¡Œçš„æ ‡è®°è¿‡ç¨‹ï¼Œåˆ†æˆäº†å¾ˆå¤šå°æ­¥ã€‚æ¯æ‰§è¡Œå®Œä¸€å°æ­¥å°±è®©åº”ç”¨é€»è¾‘æ‰§è¡Œä¸€ä¼šå„¿ï¼Œè¿™æ ·äº¤æ›¿å¤šæ¬¡åå®Œæˆæ ‡è®°ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/d42805a7a519dace93309411d32ccdb5.png",alt:"2019-06-20-12-56-41"}})]),a._v(" "),s("p",[a._v("é•¿æ—¶é—´çš„ GCï¼Œä¼šå¯¼è‡´åº”ç”¨æš‚åœå’Œæ— å“åº”ï¼Œå°†ä¼šå¯¼è‡´ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒã€‚ä» 2011 å¹´èµ·ï¼Œv8 å°±å°†ã€Œå…¨æš‚åœã€æ ‡è®°æ¢æˆäº†å¢é‡æ ‡è®°ã€‚æ”¹è¿›åçš„æ ‡è®°æ–¹å¼ï¼Œæœ€å¤§åœé¡¿æ—¶é—´å‡å°‘åˆ°åŸæ¥çš„ 1/6ã€‚")]),a._v(" "),s("h3",{attrs:{id:"lazy-sweeping-å»¶è¿Ÿæ¸…ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lazy-sweeping-å»¶è¿Ÿæ¸…ç†"}},[a._v("#")]),a._v(" lazy sweepingï¼ˆå»¶è¿Ÿæ¸…ç†ï¼‰")]),a._v(" "),s("ul",[s("li",[a._v("å‘ç”Ÿåœ¨å¢é‡æ ‡è®°ä¹‹å")]),a._v(" "),s("li",[a._v("å †ç¡®åˆ‡åœ°çŸ¥é“æœ‰å¤šå°‘ç©ºé—´èƒ½è¢«é‡Šæ”¾")]),a._v(" "),s("li",[a._v("å»¶è¿Ÿæ¸…ç†æ˜¯è¢«å…è®¸çš„ï¼Œå› æ­¤é¡µé¢çš„æ¸…ç†å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ¸…ç†")]),a._v(" "),s("li",[a._v("å½“å»¶è¿Ÿæ¸…ç†å®Œæˆåï¼Œå¢é‡æ ‡è®°å°†é‡æ–°å¼€å§‹")])]),a._v(" "),s("h2",{attrs:{id:"å†…å­˜æ³„éœ²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜æ³„éœ²"}},[a._v("#")]),a._v(" å†…å­˜æ³„éœ²")]),a._v(" "),s("h3",{attrs:{id:"å¼•èµ·å†…å­˜æ³„æ¼çš„å‡ ä¸ªç¦å¿Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼•èµ·å†…å­˜æ³„æ¼çš„å‡ ä¸ªç¦å¿Œ"}},[a._v("#")]),a._v(" å¼•èµ·å†…å­˜æ³„æ¼çš„å‡ ä¸ªç¦å¿Œ")]),a._v(" "),s("ul",[s("li",[a._v("æ»¥ç”¨å…¨å±€å˜é‡ï¼šç›´æ¥ç”¨å…¨å±€å˜é‡èµ‹å€¼ï¼Œåœ¨å‡½æ•°ä¸­æ»¥ç”¨ this æŒ‡å‘å…¨å±€å¯¹è±¡")]),a._v(" "),s("li",[a._v("ä¸é”€æ¯å®šæ—¶å™¨å’Œå›è°ƒ")]),a._v(" "),s("li",[a._v("DOM å¼•ç”¨ä¸è§„èŒƒï¼Œå¾ˆå¤šæ—¶å€™, æˆ‘ä»¬å¯¹ Dom çš„æ“ä½œ, ä¼šæŠŠ Dom çš„å¼•ç”¨ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„æˆ–è€… Map ä¸­ï¼Œå¾€å¾€æ— æ³•å¯¹å…¶è¿›è¡Œå†…å­˜å›æ”¶ï¼ŒES6 ä¸­å¼•å…¥ WeakSet å’Œ WeakMap ä¸¤ä¸ªæ–°çš„æ¦‚å¿µ, æ¥è§£å†³å¼•ç”¨é€ æˆçš„å†…å­˜å›æ”¶é—®é¢˜. WeakSet å’Œ WeakMap å¯¹äºå€¼çš„å¼•ç”¨å¯ä»¥å¿½ç•¥ä¸è®¡, ä»–ä»¬å¯¹äºå€¼çš„å¼•ç”¨æ˜¯å¼±å¼•ç”¨,å†…å­˜å›æ”¶æœºåˆ¶, ä¸ä¼šè€ƒè™‘è¿™ç§å¼•ç”¨. å½“å…¶ä»–å¼•ç”¨è¢«æ¶ˆé™¤å, å¼•ç”¨å°±ä¼šä»å†…å­˜ä¸­è¢«é‡Šæ”¾.")]),a._v(" "),s("li",[a._v("æ»¥ç”¨é—­åŒ…:")])]),a._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// æ»¥ç”¨é—­åŒ…å¼•èµ·å†…å­˜æ³„æ¼")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" theThing "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("replaceThing")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" originalThing "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" theThing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("unused")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("originalThing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// å¯¹äº 'originalThing'çš„å¼•ç”¨")]),a._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  theThing "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("longStr")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"message"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("replaceThing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br")])]),s("h3",{attrs:{id:"æŸ¥çœ‹å†…å­˜æ³„æ¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŸ¥çœ‹å†…å­˜æ³„æ¼"}},[a._v("#")]),a._v(" æŸ¥çœ‹å†…å­˜æ³„æ¼")]),a._v(" "),s("ul",[s("li",[a._v("æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹© Timeline é¢æ¿")]),a._v(" "),s("li",[a._v("åœ¨é¡¶éƒ¨çš„ Capture å­—æ®µé‡Œé¢å‹¾é€‰ Memory")]),a._v(" "),s("li",[a._v("ç‚¹å‡»å·¦ä¸Šè§’çš„å½•åˆ¶æŒ‰é’®ã€‚")]),a._v(" "),s("li",[a._v("åœ¨é¡µé¢ä¸Šè¿›è¡Œå„ç§æ“ä½œï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„ä½¿ç”¨æƒ…å†µã€‚")]),a._v(" "),s("li",[a._v("ä¸€æ®µæ—¶é—´åï¼Œç‚¹å‡»å¯¹è¯æ¡†çš„ stop æŒ‰é’®ï¼Œé¢æ¿ä¸Šå°±ä¼šæ˜¾ç¤ºè¿™æ®µæ—¶é—´çš„å†…å­˜å ç”¨æƒ…å†µã€‚")])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"æ¨èé˜…è¯»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¨èé˜…è¯»"}},[a._v("#")]),a._v(" æ¨èé˜…è¯»")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/S6RfnwjhuKx4VmXN4U9a4w",target:"_blank",rel:"noopener noreferrer"}},[a._v("å½»åº•ææ‡‚åƒåœ¾å›æ”¶æœºåˆ¶åº•å±‚åŸç†ğŸŒŸ"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000014383214",target:"_blank",rel:"noopener noreferrer"}},[a._v("èŠèŠ V8 å¼•æ“çš„åƒåœ¾å›æ”¶"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management",target:"_blank",rel:"noopener noreferrer"}},[a._v("MDN å†…å­˜ç®¡ç†"),s("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);