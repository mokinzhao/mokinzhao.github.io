(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{573:function(t,s,a){"use strict";a.r(s);var n=a(16),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"react-å·¥ä½œæµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-å·¥ä½œæµ"}},[t._v("#")]),t._v(" React å·¥ä½œæµ")]),t._v(" "),a("p",[t._v("React æ˜¯å£°æ˜å¼ UI åº“ï¼Œè´Ÿè´£å°† State è½¬æ¢ä¸ºé¡µé¢ç»“æ„ï¼ˆè™šæ‹Ÿ DOM ç»“æ„ï¼‰åï¼Œå†è½¬æ¢æˆçœŸå® DOM ç»“æ„ï¼Œäº¤ç»™æµè§ˆå™¨æ¸²æŸ“ã€‚å½“ State å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒReact ä¼šå…ˆè¿›è¡Œè°ƒå’Œï¼ˆReconciliationï¼‰é˜¶æ®µï¼Œè°ƒå’Œé˜¶æ®µç»“æŸåç«‹åˆ»è¿›å…¥æäº¤ï¼ˆCommitï¼‰é˜¶æ®µï¼Œæäº¤é˜¶æ®µç»“æŸåï¼Œæ–° State å¯¹åº”çš„é¡µé¢æ‰è¢«å±•ç¤ºå‡ºæ¥ã€‚")]),t._v(" "),a("h3",{attrs:{id:"react-çš„è°ƒå’Œé˜¶æ®µ-reconciliation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-çš„è°ƒå’Œé˜¶æ®µ-reconciliation"}},[t._v("#")]),t._v(" React çš„è°ƒå’Œé˜¶æ®µï¼ˆReconciliationï¼‰")]),t._v(" "),a("ul",[a("li",[t._v("1ã€è®¡ç®—å‡ºç›®æ ‡ State å¯¹åº”çš„è™šæ‹Ÿ DOM ç»“æ„ã€‚")]),t._v(" "),a("li",[t._v("2ã€å¯»æ‰¾ã€Œå°†è™šæ‹Ÿ DOM ç»“æ„ä¿®æ”¹ä¸ºç›®æ ‡è™šæ‹Ÿ DOM ç»“æ„ã€çš„æœ€ä¼˜æ›´æ–°æ–¹æ¡ˆã€‚ React æŒ‰ç…§æ·±åº¦ä¼˜å…ˆéå†è™šæ‹Ÿ DOM æ ‘çš„æ–¹å¼ï¼Œåœ¨ä¸€ä¸ªè™šæ‹Ÿ DOM ä¸Šå®Œæˆä¸¤ä»¶äº‹çš„è®¡ç®—åï¼Œå†è®¡ç®—ä¸‹ä¸€ä¸ªè™šæ‹Ÿ DOMã€‚ç¬¬ä¸€ä»¶äº‹ä¸»è¦æ˜¯è°ƒç”¨ç±»ç»„ä»¶çš„ render æ–¹æ³•æˆ–å‡½æ•°ç»„ä»¶è‡ªèº«ã€‚ç¬¬äºŒä»¶äº‹ä¸º React å†…éƒ¨å®ç°çš„ Diff ç®—æ³•ï¼ŒDiff ç®—æ³•ä¼šè®°å½•è™šæ‹Ÿ DOM çš„æ›´æ–°æ–¹å¼ï¼ˆå¦‚ï¼šUpdateã€Mountã€Unmountï¼‰ï¼Œä¸ºæäº¤é˜¶æ®µåšå‡†å¤‡ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"react-çš„æäº¤é˜¶æ®µ-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-çš„æäº¤é˜¶æ®µ-commit"}},[t._v("#")]),t._v(" React çš„æäº¤é˜¶æ®µï¼ˆcommitï¼‰")]),t._v(" "),a("ul",[a("li",[t._v("1ã€å°†è°ƒå’Œé˜¶æ®µè®°å½•çš„æ›´æ–°æ–¹æ¡ˆåº”ç”¨åˆ° DOM ä¸­ã€‚")]),t._v(" "),a("li",[t._v("2ã€è°ƒç”¨æš´éœ²ç»™å¼€å‘è€…çš„é’©å­æ–¹æ³•ï¼Œå¦‚ï¼šcomponentDidUpdateã€useLayoutEffect ç­‰ã€‚ æäº¤é˜¶æ®µä¸­è¿™ä¸¤ä»¶äº‹çš„æ‰§è¡Œæ—¶æœºä¸è°ƒå’Œé˜¶æ®µä¸åŒï¼Œåœ¨æäº¤é˜¶æ®µ React ä¼šå…ˆæ‰§è¡Œ 1ï¼Œç­‰ 1 å®Œæˆåå†æ‰§è¡Œ 2ã€‚å› æ­¤åœ¨å­ç»„ä»¶çš„ componentDidMount æ–¹æ³•ä¸­ï¼Œå¯ä»¥æ‰§è¡Œ document.querySelector('.parentClass') ï¼Œæ‹¿åˆ°çˆ¶ç»„ä»¶æ¸²æŸ“çš„ .parentClass DOM èŠ‚ç‚¹ï¼Œå°½ç®¡è¿™æ—¶å€™çˆ¶ç»„ä»¶çš„ componentDidMount æ–¹æ³•è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚useLayoutEffect çš„æ‰§è¡Œæ—¶æœºä¸ componentDidMount ç›¸åŒï¼Œå¯å‚è€ƒçº¿ä¸Šä»£ç [1]è¿›è¡ŒéªŒè¯ã€‚")])]),t._v(" "),a("p",[t._v("ç”±äºè°ƒå’Œé˜¶æ®µçš„ã€ŒDiff è¿‡ç¨‹ã€å’Œæäº¤é˜¶æ®µçš„ã€Œåº”ç”¨æ›´æ–°æ–¹æ¡ˆåˆ° DOMã€éƒ½å±äº React çš„å†…éƒ¨å®ç°ï¼Œå¼€å‘è€…èƒ½æä¾›çš„ä¼˜åŒ–èƒ½åŠ›æœ‰é™ï¼Œæœ¬æ–‡ä»…æœ‰ä¸€æ¡ä¼˜åŒ–æŠ€å·§ï¼ˆåˆ—è¡¨é¡¹ä½¿ç”¨ key å±æ€§[2])ä¸å®ƒä»¬æœ‰å…³ã€‚å®é™…å·¥ç¨‹ä¸­å¤§éƒ¨åˆ†ä¼˜åŒ–æ–¹å¼éƒ½é›†ä¸­åœ¨è°ƒå’Œé˜¶æ®µçš„ã€Œè®¡ç®—ç›®æ ‡è™šæ‹Ÿ DOM ç»“æ„ã€è¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹æ˜¯ä¼˜åŒ–çš„é‡ç‚¹ï¼ŒReact å†…éƒ¨çš„ Fiber æ¶æ„å’Œå¹¶å‘æ¨¡å¼ä¹Ÿæ˜¯åœ¨å‡å°‘è¯¥è¿‡ç¨‹çš„è€—æ—¶é˜»å¡ã€‚å¯¹äºæäº¤é˜¶æ®µçš„ã€Œæ‰§è¡Œé’©å­å‡½æ•°ã€è¿‡ç¨‹ï¼Œå¼€å‘è€…åº”ä¿è¯é’©å­å‡½æ•°ä¸­çš„ä»£ç å°½é‡è½»é‡ï¼Œé¿å…è€—æ—¶é˜»å¡ï¼Œç›¸å…³çš„ä¼˜åŒ–æŠ€å·§å‚è€ƒæœ¬æ–‡çš„é¿å…åœ¨ didMountã€didUpdate ä¸­æ›´æ–°ç»„ä»¶ State[3]ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å®šä¹‰-render-è¿‡ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®šä¹‰-render-è¿‡ç¨‹"}},[t._v("#")]),t._v(" å®šä¹‰ Render è¿‡ç¨‹")]),t._v(" "),a("p",[t._v("æœ¬æ–‡ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œ å°†è°ƒå’Œé˜¶æ®µä¸­ã€Œè®¡ç®—ç›®æ ‡è™šæ‹Ÿ DOM ç»“æ„ã€è¿‡ç¨‹ç§°ä¸º Render è¿‡ç¨‹ ã€‚è§¦å‘ React ç»„ä»¶çš„ Render è¿‡ç¨‹ç›®å‰æœ‰ä¸‰ç§æ–¹å¼ï¼Œåˆ†åˆ«ä¸º forceUpdateã€State æ›´æ–°ã€çˆ¶ç»„ä»¶ Render è§¦å‘å­ç»„ä»¶ Render è¿‡ç¨‹ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ä¼˜åŒ–æŠ€å·§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–æŠ€å·§"}},[t._v("#")]),t._v(" ä¼˜åŒ–æŠ€å·§")]),t._v(" "),a("ul",[a("li",[t._v("PureComponentã€React.memo")])]),t._v(" "),a("p",[t._v("åœ¨ React å·¥ä½œæµä¸­ï¼Œå¦‚æœåªæœ‰çˆ¶ç»„ä»¶å‘ç”ŸçŠ¶æ€æ›´æ–°ï¼Œå³ä½¿çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„æ‰€æœ‰ Props éƒ½æ²¡æœ‰ä¿®æ”¹ï¼Œä¹Ÿä¼šå¼•èµ·å­ç»„ä»¶çš„ Render è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("ä» React çš„å£°æ˜å¼è®¾è®¡ç†å¿µæ¥çœ‹ï¼Œå¦‚æœå­ç»„ä»¶çš„ Props å’Œ State éƒ½æ²¡æœ‰æ”¹å˜ï¼Œé‚£ä¹ˆå…¶ç”Ÿæˆçš„ DOM ç»“æ„å’Œå‰¯ä½œç”¨ä¹Ÿä¸åº”è¯¥å‘ç”Ÿæ”¹å˜ã€‚å½“å­ç»„ä»¶ç¬¦åˆå£°æ˜å¼è®¾è®¡ç†å¿µæ—¶ï¼Œå°±å¯ä»¥å¿½ç•¥å­ç»„ä»¶æœ¬æ¬¡çš„ Render è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("PureComponent å’Œ React.memo å°±æ˜¯åº”å¯¹è¿™ç§åœºæ™¯çš„ï¼ŒPureComponent æ˜¯å¯¹ç±»ç»„ä»¶çš„ Props å’Œ State è¿›è¡Œæµ…æ¯”è¾ƒï¼ŒReact.memo æ˜¯å¯¹å‡½æ•°ç»„ä»¶çš„ Props è¿›è¡Œæµ…æ¯”è¾ƒã€‚")]),t._v(" "),a("ul",[a("li",[t._v("shouldComponentUpdate")])]),t._v(" "),a("p",[t._v("åœ¨ React åˆšå¼€æºçš„é‚£æ®µæ—¶æœŸï¼Œæ•°æ®ä¸å¯å˜æ€§è¿˜æ²¡æœ‰ç°åœ¨è¿™æ ·æµè¡Œã€‚å½“æ—¶ Flux æ¶æ„å°±ä½¿ç”¨çš„æ¨¡å—å˜é‡æ¥ç»´æŠ¤ Stateï¼Œå¹¶åœ¨çŠ¶æ€æ›´æ–°æ—¶ç›´æ¥ä¿®æ”¹è¯¥æ¨¡å—å˜é‡çš„å±æ€§å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å±•å¼€è¯­æ³•[6]ç”Ÿæˆæ–°çš„å¯¹è±¡å¼•ç”¨ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚è¦å¾€æ•°ç»„ä¸­æ·»åŠ ä¸€é¡¹æ•°æ®æ—¶ï¼Œå½“æ—¶çš„ä»£ç å¾ˆå¯èƒ½æ˜¯ state.push(item)ï¼Œè€Œä¸æ˜¯ const newState = [...state, item]ã€‚è¿™ç‚¹å¯å‚è€ƒ Dan Abramov åœ¨æ¼”è®² Redux æ—¶[7]æ¼”ç¤ºçš„ Flux ä»£ç ã€‚")]),t._v(" "),a("p",[t._v("åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œå½“æ—¶çš„å¼€å‘è€…ç»å¸¸ä½¿ç”¨ shouldComponentUpdate æ¥æ·±æ¯”è¾ƒ Propsï¼Œåªåœ¨ Props æœ‰ä¿®æ”¹æ‰æ‰§è¡Œç»„ä»¶çš„ Render è¿‡ç¨‹ã€‚å¦‚ä»Šç”±äºæ•°æ®ä¸å¯å˜æ€§å’Œå‡½æ•°ç»„ä»¶çš„æµè¡Œï¼Œè¿™æ ·çš„ä¼˜åŒ–åœºæ™¯å·²ç»ä¸ä¼šå†å‡ºç°äº†ã€‚")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥ä»‹ç»å¦ä¸€ç§å¯ä»¥ä½¿ç”¨ shouldComponentUpdate æ¥ä¼˜åŒ–çš„åœºæ™¯ã€‚åœ¨é¡¹ç›®åˆå§‹é˜¶æ®µï¼Œå¼€å‘è€…å¾€å¾€å›¾æ–¹ä¾¿ä¼šç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå¤§å¯¹è±¡ä½œä¸º Propsï¼Œåé¢å­ç»„ä»¶æƒ³ç”¨å•¥å°±ç”¨å•¥ã€‚")]),t._v(" "),a("p",[t._v("å½“å¤§å¯¹è±¡ä¸­æŸä¸ªã€Œå­ç»„ä»¶æœªä½¿ç”¨çš„å±æ€§ã€å‘ç”Ÿäº†æ›´æ–°ï¼Œå­ç»„ä»¶ä¹Ÿä¼šè§¦å‘ Render è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œé€šè¿‡å®ç°å­ç»„ä»¶çš„ shouldComponentUpdate æ–¹æ³•ï¼Œä»…åœ¨ã€Œå­ç»„ä»¶ä½¿ç”¨çš„å±æ€§ã€å‘ç”Ÿæ”¹å˜æ—¶æ‰è¿”å› trueï¼Œä¾¿èƒ½é¿å…å­ç»„ä»¶é‡æ–° Renderã€‚")]),t._v(" "),a("p",[t._v("ä½†ä½¿ç”¨ shouldComponentUpdate ä¼˜åŒ–ç¬¬äºŒä¸ªåœºæ™¯æœ‰ä¸¤ä¸ªå¼Šç«¯ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœå­˜åœ¨å¾ˆå¤šå­å­™ç»„ä»¶ï¼Œã€Œæ‰¾å‡ºæ‰€æœ‰å­å­™ç»„ä»¶ä½¿ç”¨çš„å±æ€§ã€å°±ä¼šæœ‰å¾ˆå¤šå·¥ä½œé‡ï¼Œä¹Ÿå®¹æ˜“å› ä¸ºæ¼æµ‹å¯¼è‡´ bugã€‚")]),t._v(" "),a("p",[t._v("å­˜åœ¨æ½œåœ¨çš„å·¥ç¨‹éšæ‚£ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾ç»„ä»¶ç»“æ„å¦‚ä¸‹ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{data}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* B ç»„ä»¶åªä½¿ç”¨äº† data.a å’Œ data.b */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{data}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* C ç»„ä»¶åªä½¿ç”¨äº† data.a */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{data}"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("B ç»„ä»¶çš„ shouldComponentUpdate ä¸­åªæ¯”è¾ƒäº† data.a å’Œ data.bï¼Œç›®å‰æ˜¯æ²¡ä»»ä½•é—®é¢˜çš„ã€‚")]),t._v(" "),a("p",[t._v("ä¹‹åå¼€å‘è€…æƒ³åœ¨ C ç»„ä»¶ä¸­ä½¿ç”¨ data.cï¼Œå‡è®¾é¡¹ç›®ä¸­ data.a å’Œ data.c æ˜¯ä¸€èµ·æ›´æ–°çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡ä»»ä½•é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("ä½†è¿™ä»½ä»£ç å·²ç»å˜å¾—è„†å¼±äº†ï¼Œå¦‚æœæŸæ¬¡ä¿®æ”¹å¯¼è‡´ data.a å’Œ data.c ä¸ä¸€èµ·æ›´æ–°äº†ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šå‡ºé—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("è€Œä¸”å®é™…ä¸šåŠ¡ä¸­ä»£ç å¾€å¾€æ›´å¤æ‚ï¼Œä» B åˆ° C å¯èƒ½è¿˜æœ‰è‹¥å¹²ä¸­é—´ç»„ä»¶ï¼Œè¿™æ—¶å°±å¾ˆéš¾æƒ³åˆ°æ˜¯ shouldComponentUpdate å¼•èµ·çš„é—®é¢˜äº†ã€‚")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("ç¬¬äºŒä¸ªåœºæ™¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨å‘å¸ƒè€…è®¢é˜…è€…æ¨¡å¼ï¼Œåªæ˜¯ä»£ç æ”¹åŠ¨è¦ç¨å¤šä¸€äº›ï¼Œå¯å‚è€ƒæœ¬æ–‡çš„ä¼˜åŒ–æŠ€å·§ã€Œå‘å¸ƒè€…è®¢é˜…è€…è·³è¿‡ä¸­é—´ç»„ä»¶ Render è¿‡ç¨‹[8]ã€ã€‚\nç¬¬äºŒä¸ªåœºæ™¯ä¹Ÿå¯ä»¥åœ¨çˆ¶å­ç»„ä»¶é—´å¢åŠ ä¸­é—´ç»„ä»¶ï¼Œä¸­é—´ç»„ä»¶è´Ÿè´£ä»çˆ¶ç»„ä»¶ä¸­é€‰å‡ºå­ç»„ä»¶å…³å¿ƒçš„å±æ€§ï¼Œå†ä¼ ç»™å­ç»„ä»¶ã€‚ç›¸æ¯”äº shouldComponentUpdate æ–¹æ³•ï¼Œä¼šå¢åŠ ç»„ä»¶å±‚çº§ï¼Œä½†ä¸ä¼šæœ‰ç¬¬äºŒä¸ªå¼Šç«¯ã€‚\næœ¬æ–‡ä¸­çš„è·³è¿‡å›è°ƒå‡½æ•°æ”¹å˜è§¦å‘çš„ Render è¿‡ç¨‹[9]ä¹Ÿå¯ä»¥ç”¨ shouldComponentUpdate å®ç°ï¼Œå› ä¸ºå›è°ƒå‡½æ•°å¹¶ä¸å‚ä¸ç»„ä»¶çš„ Render è¿‡ç¨‹ã€‚")])]),t._v(" "),a("ul",[a("li",[t._v("useMemoã€useCallback å®ç°ç¨³å®šçš„ Props å€¼")])]),t._v(" "),a("p",[t._v("å¦‚æœä¼ ç»™å­ç»„ä»¶çš„æ´¾ç”ŸçŠ¶æ€æˆ–å‡½æ•°ï¼Œæ¯æ¬¡éƒ½æ˜¯æ–°çš„å¼•ç”¨ï¼Œé‚£ä¹ˆ PureComponent å’Œ React.memo ä¼˜åŒ–å°±ä¼šå¤±æ•ˆã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨ useMemo å’Œ useCallback æ¥ç”Ÿæˆç¨³å®šå€¼ï¼Œå¹¶ç»“åˆ PureComponent æˆ– React.memo é¿å…å­ç»„ä»¶é‡æ–° Renderã€‚")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("æ‹“å±•çŸ¥è¯† useCallback æ˜¯ã€ŒuseMemo çš„è¿”å›å€¼ä¸ºå‡½æ•°ã€æ—¶çš„ç‰¹æ®Šæƒ…å†µï¼Œæ˜¯ React æä¾›çš„ä¾¿æ·æ–¹å¼ã€‚åœ¨ React Server Hooks ä»£ç [10] ä¸­ï¼ŒuseCallback å°±æ˜¯åŸºäº useMemo å®ç°çš„ã€‚å°½ç®¡ React Client Hooks æ²¡æœ‰ä½¿ç”¨åŒä¸€ä»½ä»£ç ï¼Œä½† useCallback[11] çš„ä»£ç é€»è¾‘å’Œ useMemo[12] çš„ä»£ç é€»è¾‘ä»æ˜¯ä¸€æ ·çš„ã€‚")])]),t._v(" "),a("ul",[a("li",[t._v("useMemo å‡å°‘ç»„ä»¶ Render è¿‡ç¨‹è€—æ—¶")])]),t._v(" "),a("p",[t._v("useMemo æ˜¯ä¸€ç§ç¼“å­˜æœºåˆ¶æé€Ÿï¼Œå½“å®ƒçš„ä¾èµ–æœªå‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¸ä¼šè§¦å‘é‡æ–°è®¡ç®—ã€‚ä¸€èˆ¬ç”¨åœ¨ã€Œè®¡ç®—æ´¾ç”ŸçŠ¶æ€çš„ä»£ç ã€éå¸¸è€—æ—¶çš„åœºæ™¯ä¸­ï¼Œå¦‚ï¼šéå†å¤§åˆ—è¡¨åšç»Ÿè®¡ä¿¡æ¯ã€‚")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("æ‹“å±•çŸ¥è¯†\nReact å®˜æ–¹å¹¶ä¸ä¿è¯ useMemo ä¸€å®šä¼šè¿›è¡Œç¼“å­˜ï¼Œæ‰€ä»¥å¯èƒ½åœ¨ä¾èµ–ä¸æ”¹å˜æ—¶ï¼Œä»ç„¶æ‰§è¡Œé‡æ–°è®¡ç®—ã€‚å‚è€ƒ How to memoize calculations[13]\nç¼“å­˜ä¼˜åŒ–å¾€å¾€æ˜¯æœ€ç®€å•æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹å¼ï¼Œä½† useMemo ç¼“å­˜åŠ é€Ÿåªèƒ½ç¼“å­˜æœ€è¿‘ä¸€æ¬¡å‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œå¦‚æœæƒ³ç¼“å­˜æ›´å¤šæ¬¡å‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œå¯ä½¿ç”¨ memoizee[14]ã€‚")])]),t._v(" "),a("ul",[a("li",[t._v("åˆ—è¡¨é¡¹ä½¿ç”¨ key å±æ€§")])]),t._v(" "),a("p",[t._v("å½“æ¸²æŸ“åˆ—è¡¨é¡¹æ—¶ï¼Œå¦‚æœä¸ç»™ç»„ä»¶è®¾ç½®ä¸ç›¸ç­‰çš„å±æ€§ keyï¼Œå°±ä¼šæ”¶åˆ°å¦‚ä¸‹æŠ¥è­¦ã€‚\n"),a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/iagNW4Zy9Cyb3fryIqOibONnxEKQSxKqlDFppJUVgy0M8Pma6dmqVATQrKxtvFiakKEmn9F0OXGZvEibBpaMmHxiaGQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"åˆ—è¡¨é¡¹ä½¿ç”¨ key å±æ€§"}}),t._v("\nç›¸ä¿¡å¾ˆå¤šå¼€å‘è€…å·²ç»è§è¿‡è¯¥æŠ¥è­¦æˆç™¾ä¸Šåƒæ¬¡äº†ï¼Œé‚£ key å±æ€§åˆ°åº•åœ¨ä¼˜åŒ–äº†ä»€ä¹ˆå‘¢ï¼Ÿä¸¾ä¸ª ğŸŒ°ï¼Œåœ¨ä¸ä½¿ç”¨ key æ—¶ï¼Œç»„ä»¶ä¸¤æ¬¡ Render çš„ç»“æœå¦‚ä¸‹ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" å‰ä¸€æ¬¡ Render ç»“æœ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Duke"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Villanova"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" æ–°çš„ Render ç»“æœ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Connecticut"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Duke"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Villanova"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("æ­¤æ—¶ React çš„ Diff ç®—æ³•ä¼šæŒ‰ç…§ ")]),a("li",[t._v(" å‡ºç°çš„å…ˆåé¡ºåºè¿›è¡Œæ¯”è¾ƒï¼Œå¾—å‡ºç»“æœä¸ºéœ€è¦æ›´æ–°å‰ä¸¤ä¸ª")]),a("li",[t._v("å¹¶åˆ›å»ºå†…å®¹ä¸º Villanova çš„ liï¼Œä¸€å…±ä¼šæ‰§è¡Œä¸¤æ¬¡ DOM æ›´æ–°ã€ä¸€æ¬¡ DOM åˆ›å»ºã€‚å¦‚æœåŠ ä¸Š React çš„ key å±æ€§ï¼Œä¸¤æ¬¡ Render ç»“æœå¦‚ä¸‹ã€‚"),a("p"),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" å‰ä¸€æ¬¡ Render ç»“æœ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2015"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Duke"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2016"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Villanova"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" æ–°çš„ Render ç»“æœ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2014"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Connecticut"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2015"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Duke"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2016"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Villanova"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("React Diff ç®—æ³•ä¼šæŠŠ key å€¼ä¸º 2015 çš„è™šæ‹Ÿ DOM è¿›è¡Œæ¯”è¾ƒï¼Œå‘ç° key ä¸º 2015 çš„è™šæ‹Ÿ DOM æ²¡æœ‰å‘ç”Ÿä¿®æ”¹ï¼Œä¸ç”¨æ›´æ–°ã€‚")]),t._v(" "),a("p",[t._v("åŒæ ·ï¼Œkey å€¼ä¸º 2016 çš„è™šæ‹Ÿ DOM ä¹Ÿä¸éœ€è¦æ›´æ–°ã€‚ç»“æœå°±åªéœ€è¦åˆ›å»º key å€¼ä¸º 2014 çš„è™šæ‹Ÿ DOMã€‚\nç›¸æ¯”äºä¸ä½¿ç”¨ key çš„ä»£ç ï¼Œä½¿ç”¨ key èŠ‚çœäº†ä¸¤æ¬¡ DOM æ›´æ–°æ“ä½œã€‚å¦‚æœæŠŠä¾‹å­ä¸­çš„ ")])]),a("li",[t._v("æ¢æˆè‡ªå®šä¹‰ç»„ä»¶ï¼Œå¹¶ä¸”è‡ªå®šä¹‰ç»„ä»¶ä½¿ç”¨äº† PureComponent æˆ– React.memo ä¼˜åŒ–ã€‚"),a("p"),t._v(" "),a("p",[t._v("é‚£ä¹ˆä½¿ç”¨ key å±æ€§å°±ä¸åªèŠ‚çœäº† DOM æ›´æ–°ï¼Œè¿˜é¿å…äº†ç»„ä»¶çš„ Render è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("React å®˜æ–¹æ¨è[15]å°†æ¯é¡¹æ•°æ®çš„ ID ä½œä¸ºç»„ä»¶çš„ keyï¼Œä»¥è¾¾åˆ°ä¸Šè¿°çš„ä¼˜åŒ–ç›®çš„ã€‚")]),t._v(" "),a("p",[t._v("å¹¶ä¸”ä¸æ¨èä½¿ç”¨æ¯é¡¹çš„ç´¢å¼•ä½œä¸º keyï¼Œå› ä¸ºä¼ ç´¢å¼•ä½œä¸º key æ—¶ï¼Œå°±ä¼šé€€åŒ–ä¸ºä¸ä½¿ç”¨ key æ—¶çš„ä»£ç ã€‚")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆæ˜¯å¦åœ¨æ‰€æœ‰åˆ—è¡¨æ¸²æŸ“çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ ID éƒ½ä¼˜äºä½¿ç”¨ç´¢å¼•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œåœ¨å¸¸è§çš„åˆ†é¡µåˆ—è¡¨ä¸­ï¼Œç¬¬ä¸€é¡µå’Œç¬¬äºŒé¡µçš„åˆ—è¡¨é¡¹ ID éƒ½æ˜¯ä¸åŒï¼Œå‡è®¾æ¯é¡µå±•ç¤ºä¸‰æ¡æ•°æ®ï¼Œé‚£ä¹ˆåˆ‡æ¢é¡µé¢å‰åç»„ä»¶ Render ç»“æœå¦‚ä¸‹ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" ç¬¬ä¸€é¡µçš„åˆ—è¡¨é¡¹è™šæ‹Ÿ "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dataA"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dataB"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dataC"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" åˆ‡æ¢åˆ°ç¬¬äºŒé¡µåçš„è™šæ‹Ÿ "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dataD"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"e"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dataE"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dataF"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("åˆ‡æ¢åˆ°ç¬¬äºŒé¡µåï¼Œç”±äºæ‰€æœ‰ ")])]),a("li",[t._v(" çš„ key å€¼ä¸åŒï¼Œæ‰€ä»¥ Diff ç®—æ³•ä¼šå°†ç¬¬ä¸€é¡µçš„æ‰€æœ‰ DOM èŠ‚ç‚¹æ ‡è®°ä¸ºåˆ é™¤ï¼Œç„¶åå°†ç¬¬äºŒé¡µçš„æ‰€æœ‰ DOM èŠ‚ç‚¹æ ‡è®°ä¸ºæ–°å¢ã€‚"),a("p"),t._v(" "),a("p",[t._v("æ•´ä¸ªæ›´æ–°è¿‡ç¨‹éœ€è¦ä¸‰æ¬¡ DOM åˆ é™¤ã€ä¸‰æ¬¡ DOM åˆ›å»ºã€‚å¦‚æœä¸ä½¿ç”¨ keyï¼ŒDiff ç®—æ³•åªä¼šå°†ä¸‰ä¸ª ")])]),a("li",[t._v(" èŠ‚ç‚¹æ ‡è®°ä¸ºæ›´æ–°ï¼Œæ‰§è¡Œä¸‰æ¬¡ DOM æ›´æ–°ã€‚"),a("p"),t._v(" "),a("p",[t._v("å‚è€ƒ Demo æ²¡æœ‰æ·»åŠ ã€åˆ é™¤ã€æ’åºåŠŸèƒ½çš„åˆ†é¡µåˆ—è¡¨[16]ï¼Œ ä½¿ç”¨ key æ—¶æ¯æ¬¡ç¿»é¡µè€—æ—¶çº¦ä¸º 140msï¼Œè€Œä¸ä½¿ç”¨ key ä»…ä¸º 70msã€‚å°½ç®¡å­˜åœ¨ä»¥ä¸Šåœºæ™¯ï¼ŒReact å®˜æ–¹ä»ç„¶æ¨èä½¿ç”¨ ID ä½œä¸ºæ¯é¡¹çš„ key å€¼ã€‚å…¶åŸå› æœ‰ä¸¤ï¼š")]),t._v(" "),a("p",[t._v("åœ¨åˆ—è¡¨ä¸­æ‰§è¡Œåˆ é™¤ã€æ’å…¥ã€æ’åºåˆ—è¡¨é¡¹çš„æ“ä½œæ—¶ï¼Œä½¿ç”¨ ID ä½œä¸º key å°†æ›´é«˜æ•ˆã€‚è€Œç¿»é¡µæ“ä½œå¾€å¾€ä¼´éšç€ API è¯·æ±‚ï¼ŒDOM æ“ä½œè€—æ—¶è¿œå°äº API è¯·æ±‚è€—æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨ ID åœ¨è¯¥åœºæ™¯ä¸‹å¯¹ç”¨æˆ·ä½“éªŒå½±å“ä¸å¤§ã€‚\nä½¿ç”¨ ID åšä¸º key å¯ä»¥ç»´æŠ¤è¯¥ ID å¯¹åº”çš„åˆ—è¡¨é¡¹ç»„ä»¶çš„ Stateã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒæŸè¡¨æ ¼ä¸­æ¯åˆ—éƒ½æœ‰æ™®é€šæ€å’Œç¼–è¾‘æ€ä¸¤ä¸ªçŠ¶æ€ï¼Œèµ·åˆæ‰€æœ‰åˆ—éƒ½æ˜¯æ™®é€šæ€ï¼Œç”¨æˆ·ç‚¹å‡»ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ï¼Œä½¿å…¶è¿›å…¥ç¼–è¾‘æ€ã€‚ç„¶åç”¨æˆ·åˆæ‹–æ‹½ç¬¬äºŒè¡Œï¼Œå°†å…¶ç§»åŠ¨åˆ°è¡¨æ ¼çš„ç¬¬ä¸€è¡Œã€‚å¦‚æœå¼€å‘è€…ä½¿ç”¨ç´¢å¼•ä½œä¸º keyï¼Œé‚£ä¹ˆç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—çš„çŠ¶æ€ä»ç„¶ä¸ºç¼–è¾‘æ€ï¼Œè€Œç”¨æˆ·å®é™…å¸Œæœ›ç¼–è¾‘çš„æ˜¯ç¬¬äºŒè¡Œçš„æ•°æ®ï¼Œåœ¨ç”¨æˆ·çœ‹æ¥å°±æ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ã€‚å°½ç®¡è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡å°†ã€Œæ˜¯å¦å¤„äºç¼–è¾‘æ€ã€å­˜æ”¾åœ¨æ•°æ®é¡¹çš„æ•°æ®ä¸­ï¼Œåˆ©ç”¨ Props æ¥è§£å†³ï¼Œä½†æ˜¯ä½¿ç”¨ ID ä½œä¸º key ä¸æ˜¯æ›´é¦™å—ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("æ‰¹é‡æ›´æ–°ï¼Œå‡å°‘ Render æ¬¡æ•°")])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å…ˆå›å¿†ä¸€é“å‰å‡ å¹´çš„ React é¢è¯•å¸¸è€ƒé¢˜ï¼ŒReact ç±»ç»„ä»¶ä¸­ setState æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿå¦‚æœå¯¹ç±»ç»„ä»¶ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥å°† setState ç†è§£ä¸º useState çš„ç¬¬äºŒä¸ªè¿”å›å€¼ã€‚balabala...")]),t._v(" "),a("p",[t._v("ç­”æ¡ˆæ˜¯ï¼šåœ¨ React ç®¡ç†çš„äº‹ä»¶å›è°ƒå’Œç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒsetState æ˜¯å¼‚æ­¥çš„ï¼Œè€Œå…¶ä»–æ—¶å€™ setState éƒ½æ˜¯åŒæ­¥çš„ã€‚è¿™ä¸ªé—®é¢˜æ ¹æœ¬åŸå› å°±æ˜¯ React åœ¨è‡ªå·±ç®¡ç†çš„äº‹ä»¶å›è°ƒå’Œç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¯¹äº setState æ˜¯æ‰¹é‡æ›´æ–°çš„ï¼Œè€Œåœ¨å…¶ä»–æ—¶å€™æ˜¯ç«‹å³æ›´æ–°çš„ã€‚")]),t._v(" "),a("p",[t._v("è¯»è€…å¯å‚è€ƒçº¿ä¸Šç¤ºä¾‹ setState åŒæ­¥è¿˜æ˜¯å¼‚æ­¥[17]ï¼Œå¹¶è‡ªè¡ŒéªŒè¯ã€‚")]),t._v(" "),a("p",[t._v("æ‰¹é‡æ›´æ–° setState æ—¶ï¼Œå¤šæ¬¡æ‰§è¡Œ setState åªä¼šè§¦å‘ä¸€æ¬¡ Render è¿‡ç¨‹ã€‚ç›¸ååœ¨ç«‹å³æ›´æ–° setState æ—¶ï¼Œæ¯æ¬¡ setState éƒ½ä¼šè§¦å‘ä¸€æ¬¡ Render è¿‡ç¨‹ï¼Œå°±å­˜åœ¨æ€§èƒ½å½±å“ã€‚")]),t._v(" "),a("p",[t._v("å‡è®¾æœ‰å¦‚ä¸‹ç»„ä»¶ä»£ç ï¼Œè¯¥ç»„ä»¶åœ¨ getData() çš„ API è¯·æ±‚ç»“æœè¿”å›åï¼Œåˆ†åˆ«æ›´æ–°äº†ä¸¤ä¸ª State ã€‚çº¿ä¸Šä»£ç å®æ“å‚è€ƒï¼šbatchUpdates æ‰¹é‡æ›´æ–°[18]ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NormalComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      éæ‰¹é‡æ›´æ–°ç»„ä»¶æ—¶ Render æ¬¡æ•°ï¼š\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"normal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])]),a("p",[t._v("è¯¥ç»„ä»¶ä¼šåœ¨ setList(data.list) åè§¦å‘ç»„ä»¶çš„ Render è¿‡ç¨‹ï¼Œç„¶ååœ¨ setInfo(data.info) åå†æ¬¡è§¦å‘ Render è¿‡ç¨‹ï¼Œé€ æˆæ€§èƒ½æŸå¤±ã€‚é‡åˆ°è¯¥é—®é¢˜ï¼Œå¼€å‘è€…æœ‰ä¸¤ç§å®ç°æ‰¹é‡æ›´æ–°çš„æ–¹å¼æ¥è§£å†³è¯¥é—®é¢˜:")]),t._v(" "),a("p",[t._v("å°†å¤šä¸ª State åˆå¹¶ä¸ºå•ä¸ª Stateã€‚ä¾‹å¦‚ useState({ list: null, info: null }) æ›¿ä»£ list å’Œ info ä¸¤ä¸ª Stateã€‚\nä½¿ç”¨ React å®˜æ–¹æä¾›çš„ unstable_batchedUpdates æ–¹æ³•ï¼Œå°†å¤šæ¬¡ setState å°è£…åˆ° unstable_batchedUpdates å›è°ƒä¸­ã€‚ä¿®æ”¹åä»£ç å¦‚ä¸‹ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("BatchedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unstable_batchedUpdates")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      æ‰¹é‡æ›´æ–°ç»„ä»¶æ—¶ Render æ¬¡æ•°ï¼š\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"batched"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("æ¨èé˜…è¯»ä¸ºä»€ä¹ˆ setState æ˜¯å¼‚æ­¥çš„ï¼Ÿ[19]\nä¸ºä»€ä¹ˆé¢è¯•å®˜ä¸ä¼šé—®â€œå‡½æ•°ç»„ä»¶ä¸­çš„ setState æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿâ€ï¼Ÿå› ä¸ºå‡½æ•°ç»„ä»¶ä¸­ç”Ÿæˆçš„å‡½æ•°æ˜¯é€šè¿‡é—­åŒ…å¼•ç”¨äº† stateï¼Œè€Œä¸æ˜¯é€šè¿‡ this.state çš„æ–¹å¼å¼•ç”¨ stateï¼Œæ‰€ä»¥å‡½æ•°ç»„ä»¶çš„å¤„ç†å‡½æ•°ä¸­ state ä¸€å®šæ˜¯æ—§å€¼ï¼Œä¸å¯èƒ½æ˜¯æ–°å€¼ã€‚å¯ä»¥è¯´å‡½æ•°ç»„ä»¶å·²ç»å°†è¿™ä¸ªé—®é¢˜å±è”½æ‰äº†ï¼Œæ‰€ä»¥é¢è¯•å®˜ä¹Ÿå°±ä¸ä¼šé—®äº†ã€‚å¯å‚è€ƒçº¿ä¸Šç¤ºä¾‹[20]ã€‚\næ ¹æ®å®˜æ–¹æ–‡æ¡£[21]ï¼Œåœ¨ React å¹¶å‘æ¨¡å¼ä¸­ï¼Œå°†é»˜è®¤ä»¥æ‰¹é‡æ›´æ–°æ–¹å¼æ‰§è¡Œ setStateã€‚åˆ°é‚£æ—¶å€™ï¼Œä¹Ÿå¯èƒ½å°±ä¸éœ€è¦è¿™ä¸ªä¼˜åŒ–äº†ã€‚\n"),a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/iagNW4Zy9Cyb3fryIqOibONnxEKQSxKqlDYFSHywc9Bhe8uj8f9qQ6IIeUrt8KYF8uSm3xGfNShRh3ric3DWE8ibDQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"ä¸ºä»€ä¹ˆ setState æ˜¯å¼‚æ­¥çš„"}})])]),t._v(" "),a("ul",[a("li",[t._v("æŒ‰ä¼˜å…ˆçº§æ›´æ–°ï¼ŒåŠæ—¶å“åº”ç”¨æˆ·")])]),t._v(" "),a("p",[t._v("ä¼˜å…ˆçº§æ›´æ–°æ˜¯æ‰¹é‡æ›´æ–°çš„é€†å‘æ“ä½œï¼Œå…¶æ€æƒ³æ˜¯ï¼šä¼˜å…ˆå“åº”ç”¨æˆ·è¡Œä¸ºï¼Œå†å®Œæˆè€—æ—¶æ“ä½œã€‚å¸¸è§çš„åœºæ™¯æ˜¯ï¼šé¡µé¢å¼¹å‡ºä¸€ä¸ª Modalï¼Œå½“ç”¨æˆ·ç‚¹å‡» Modal ä¸­çš„ç¡®å®šæŒ‰é’®åï¼Œä»£ç å°†æ‰§è¡Œä¸¤ä¸ªæ“ä½œã€‚\na) å…³é—­ Modalã€‚")]),t._v(" "),a("p",[t._v("b) é¡µé¢å¤„ç† Modal ä¼ å›çš„æ•°æ®å¹¶å±•ç¤ºç»™ç”¨æˆ·ã€‚")]),t._v(" "),a("p",[t._v("å½“ b) æ“ä½œéœ€è¦æ‰§è¡Œ 500ms æ—¶ï¼Œç”¨æˆ·ä¼šæ˜æ˜¾æ„Ÿè§‰åˆ°ä»ç‚¹å‡»æŒ‰é’®åˆ° Modal è¢«å…³é—­ä¹‹é—´çš„å»¶è¿Ÿã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­å‚è€ƒï¼šCodeSandbox åœ¨çº¿ Demo[22]ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è¯¥ä¾‹å­ä¸­ï¼Œç”¨æˆ·æ·»åŠ ä¸€ä¸ªæ•´æ•°åï¼Œé¡µé¢è¦éšè—è¾“å…¥æ¡†ï¼Œå¹¶å°†æ–°æ·»åŠ çš„æ•´æ•°åŠ å…¥åˆ°æ•´æ•°åˆ—è¡¨ï¼Œå°†åˆ—è¡¨æ’åºåå†å±•ç¤ºã€‚")]),t._v(" "),a("p",[t._v("ä»¥ä¸‹ä¸ºä¸€èˆ¬çš„å®ç°æ–¹å¼ï¼Œå°† slowHandle å‡½æ•°ä½œä¸ºç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("slowHandle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setShowInput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNumbers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("numbers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("inputValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("slowHandle() æ‰§è¡Œè¿‡ç¨‹è€—æ—¶é•¿ï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®åä¼šæ˜æ˜¾æ„Ÿè§‰åˆ°é¡µé¢å¡é¡¿ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœè®©é¡µé¢ä¼˜å…ˆéšè—è¾“å…¥æ¡†ï¼Œç”¨æˆ·ä¾¿èƒ½ç«‹åˆ»æ„ŸçŸ¥åˆ°é¡µé¢æ›´æ–°ï¼Œä¸ä¼šæœ‰å¡é¡¿æ„Ÿã€‚")]),t._v(" "),a("p",[t._v("å®ç°ä¼˜å…ˆçº§æ›´æ–°çš„è¦ç‚¹æ˜¯å°†è€—æ—¶ä»»åŠ¡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œä¼˜å…ˆå“åº”ç”¨æˆ·è¡Œä¸ºã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚åœ¨è¯¥ä¾‹ä¸­ï¼Œå°† setNumbers ç§»åŠ¨åˆ° setTimeout çš„å›è°ƒä¸­ï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®åä¾¿èƒ½ç«‹å³çœ‹åˆ°è¾“å…¥æ¡†è¢«éšè—ï¼Œä¸ä¼šæ„ŸçŸ¥åˆ°é¡µé¢å¡é¡¿ã€‚ä¼˜åŒ–åçš„ä»£ç å¦‚ä¸‹ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fastHandle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼˜å…ˆå“åº”ç”¨æˆ·è¡Œä¸º")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setShowInput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†è€—æ—¶ä»»åŠ¡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNumbers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("numbers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("inputValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ul",[a("li",[t._v("å‘å¸ƒè€…è®¢é˜…è€…è·³è¿‡ä¸­é—´ç»„ä»¶ Render è¿‡ç¨‹")])]),t._v(" "),a("p",[t._v("eact æ¨èå°†å…¬å…±æ•°æ®æ”¾åœ¨æ‰€æœ‰ã€Œéœ€è¦è¯¥çŠ¶æ€çš„ç»„ä»¶ã€çš„å…¬å…±ç¥–å…ˆä¸Šï¼Œä½†å°†çŠ¶æ€æ”¾åœ¨å…¬å…±ç¥–å…ˆä¸Šåï¼Œè¯¥çŠ¶æ€å°±éœ€è¦å±‚å±‚å‘ä¸‹ä¼ é€’ï¼Œç›´åˆ°ä¼ é€’ç»™ä½¿ç”¨è¯¥çŠ¶æ€çš„ç»„ä»¶ä¸ºæ­¢ã€‚")]),t._v(" "),a("p",[t._v("æ¯æ¬¡çŠ¶æ€çš„æ›´æ–°éƒ½ä¼šæ¶‰åŠä¸­é—´ç»„ä»¶çš„ Render è¿‡ç¨‹ï¼Œä½†ä¸­é—´ç»„ä»¶å¹¶ä¸å…³å¿ƒè¯¥çŠ¶æ€ï¼Œå®ƒçš„ Render è¿‡ç¨‹åªè´Ÿè´£å°†è¯¥çŠ¶æ€å†ä¼ ç»™å­ç»„ä»¶ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹å¯ä»¥å°†çŠ¶æ€ç”¨å‘å¸ƒè€…è®¢é˜…è€…æ¨¡å¼ç»´æŠ¤ï¼Œåªæœ‰å…³å¿ƒè¯¥çŠ¶æ€çš„ç»„ä»¶æ‰å»è®¢é˜…è¯¥çŠ¶æ€ï¼Œä¸å†éœ€è¦ä¸­é—´ç»„ä»¶ä¼ é€’è¯¥çŠ¶æ€ã€‚")]),t._v(" "),a("p",[t._v("å½“çŠ¶æ€æ›´æ–°æ—¶ï¼Œå‘å¸ƒè€…å‘å¸ƒæ•°æ®æ›´æ–°æ¶ˆæ¯ï¼Œåªæœ‰è®¢é˜…è€…ç»„ä»¶æ‰ä¼šè§¦å‘ Render è¿‡ç¨‹ï¼Œä¸­é—´ç»„ä»¶ä¸å†æ‰§è¡Œ Render è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("åªè¦æ˜¯å‘å¸ƒè€…è®¢é˜…è€…æ¨¡å¼çš„åº“ï¼Œéƒ½å¯ä»¥è¿›è¡Œè¯¥ä¼˜åŒ–ã€‚æ¯”å¦‚ï¼šreduxã€use-global-stateã€React.createContext ç­‰ã€‚ä¾‹å­å‚è€ƒï¼šå‘å¸ƒè€…è®¢é˜…è€…æ¨¡å¼è·³è¿‡ä¸­é—´ç»„ä»¶çš„æ¸²æŸ“é˜¶æ®µ[23]ï¼Œæœ¬ç¤ºä¾‹ä½¿ç”¨ React.createContext è¿›è¡Œå®ç°ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useContext "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" renderCntMap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("renderOnce")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("renderCntMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("renderCntMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†éœ€è¦å…¬å…±è®¿é—®çš„éƒ¨åˆ†ç§»åŠ¨åˆ° Context ä¸­è¿›è¡Œä¼˜åŒ–")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Context.Provider å°±æ˜¯å‘å¸ƒè€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Context.Consumer å°±æ˜¯æ¶ˆè´¹è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ValueCtx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("CtxContainer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" children "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCnt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("setCnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ValueCtx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("cnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ValueCtx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CompA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cnt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ValueCtx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å†…ä½¿ç”¨ cnt")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      ç»„ä»¶ CompA Render æ¬¡æ•°ï¼š\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CompA"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CompB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cnt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ValueCtx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å†…ä½¿ç”¨ cnt")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      ç»„ä»¶ CompB Render æ¬¡æ•°ï¼š\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CompB"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CompC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      ç»„ä»¶ CompC Render æ¬¡æ•°ï¼š\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CompC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("PubSubCommunicate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CtxContainer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("ä¼˜åŒ–ååœºæ™¯"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          å°†çŠ¶æ€æå‡è‡³æœ€ä½å…¬å…±ç¥–å…ˆçš„ä¸Šå±‚ï¼Œç”¨ CtxContainer å°†å…¶å†…å®¹åŒ…è£¹ã€‚\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("marginTop")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20px"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          æ¯æ¬¡ Render æ—¶ï¼Œåªæœ‰ç»„ä»¶"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v("å’Œç»„ä»¶"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),t._v("ä¼šé‡æ–° Render ã€‚\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("marginTop")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"40px"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          çˆ¶ç»„ä»¶ Render æ¬¡æ•°ï¼š\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CompA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CompB "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CompC "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("CtxContainer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" PubSubCommunicate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br"),a("span",{staticClass:"line-number"},[t._v("60")]),a("br"),a("span",{staticClass:"line-number"},[t._v("61")]),a("br"),a("span",{staticClass:"line-number"},[t._v("62")]),a("br"),a("span",{staticClass:"line-number"},[t._v("63")]),a("br"),a("span",{staticClass:"line-number"},[t._v("64")]),a("br"),a("span",{staticClass:"line-number"},[t._v("65")]),a("br"),a("span",{staticClass:"line-number"},[t._v("66")]),a("br"),a("span",{staticClass:"line-number"},[t._v("67")]),a("br"),a("span",{staticClass:"line-number"},[t._v("68")]),a("br"),a("span",{staticClass:"line-number"},[t._v("69")]),a("br"),a("span",{staticClass:"line-number"},[t._v("70")]),a("br"),a("span",{staticClass:"line-number"},[t._v("71")]),a("br"),a("span",{staticClass:"line-number"},[t._v("72")]),a("br"),a("span",{staticClass:"line-number"},[t._v("73")]),a("br"),a("span",{staticClass:"line-number"},[t._v("74")]),a("br"),a("span",{staticClass:"line-number"},[t._v("75")]),a("br"),a("span",{staticClass:"line-number"},[t._v("76")]),a("br"),a("span",{staticClass:"line-number"},[t._v("77")]),a("br"),a("span",{staticClass:"line-number"},[t._v("78")]),a("br"),a("span",{staticClass:"line-number"},[t._v("79")]),a("br")])]),a("p",[t._v("è¿è¡Œåæ•ˆæœï¼šTODO: æ”¾å›¾ã€‚ä»å›¾ä¸­å¯çœ‹å‡ºï¼Œä¼˜åŒ–ååªæœ‰ä½¿ç”¨äº†å…¬å…±çŠ¶æ€çš„ç»„ä»¶ CompA å’Œ CompB å‘ç”Ÿäº†æ›´æ–°ï¼Œå‡å°‘äº†çˆ¶ç»„ä»¶å’Œ CompC ç»„ä»¶çš„ Render æ¬¡æ•°ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("useMemo è¿”å›è™šæ‹Ÿ DOM å¯è·³è¿‡è¯¥ç»„ä»¶ Render è¿‡ç¨‹")])]),t._v(" "),a("p",[t._v("åˆ©ç”¨ useMemo å¯ä»¥ç¼“å­˜è®¡ç®—ç»“æœçš„ç‰¹ç‚¹ï¼Œå¦‚æœ useMemo è¿”å›çš„æ˜¯ç»„ä»¶çš„è™šæ‹Ÿ DOMï¼Œåˆ™å°†åœ¨ useMemo ä¾èµ–ä¸å˜æ—¶ï¼Œè·³è¿‡ç»„ä»¶çš„ Render é˜¶æ®µã€‚")]),t._v(" "),a("p",[t._v("è¯¥æ–¹å¼ä¸ React.memo ç±»ä¼¼ï¼Œä½†ä¸ React.memo ç›¸æ¯”æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š")]),t._v(" "),a("p",[t._v("æ›´æ–¹ä¾¿ã€‚React.memo éœ€è¦å¯¹ç»„ä»¶è¿›è¡Œä¸€æ¬¡åŒ…è£…ï¼Œç”Ÿæˆæ–°çš„ç»„ä»¶ã€‚è€Œ useMemo åªéœ€åœ¨å­˜åœ¨æ€§èƒ½ç“¶é¢ˆçš„åœ°æ–¹ä½¿ç”¨ï¼Œä¸ç”¨ä¿®æ”¹ç»„ä»¶ã€‚\næ›´çµæ´»ã€‚useMemo ä¸ç”¨è€ƒè™‘ç»„ä»¶çš„æ‰€æœ‰ Propsï¼Œè€Œåªéœ€è€ƒè™‘å½“å‰åœºæ™¯ä¸­ç”¨åˆ°çš„å€¼ï¼Œä¹Ÿå¯ä½¿ç”¨ useDeepCompareMemo[24] å¯¹ç”¨åˆ°çš„å€¼è¿›è¡Œæ·±æ¯”è¾ƒã€‚\nä¾‹å­å‚è€ƒï¼šuseMemo è·³è¿‡ç»„ä»¶ Render è¿‡ç¨‹[25]ã€‚")]),t._v(" "),a("p",[t._v("è¯¥ä¾‹å­ä¸­ï¼Œçˆ¶ç»„ä»¶çŠ¶æ€æ›´æ–°åï¼Œä¸ä½¿ç”¨ useMemo çš„å­ç»„ä»¶ä¼šæ‰§è¡Œ Render è¿‡ç¨‹ï¼Œè€Œä½¿ç”¨ useMemo çš„å­ç»„ä»¶ä¸ä¼šæ‰§è¡Œã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useMemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./styles.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" renderCntMap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Comp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  renderCntMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("renderCntMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      ç»„ä»¶ã€Œ\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("ã€ Render æ¬¡æ•°ï¼š\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("renderCntMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" setCnt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCnt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("setCnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" comp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Comp name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä½¿ç”¨ useMemo ä½œä¸º children"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Comp name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç›´æ¥ä½œä¸º children"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("comp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br")])]),a("ul",[a("li",[t._v("debounceã€throttle ä¼˜åŒ–é¢‘ç¹è§¦å‘çš„å›è°ƒ")])]),t._v(" "),a("p",[t._v("åœ¨æœç´¢ç»„ä»¶ä¸­ï¼Œå½“ input ä¸­å†…å®¹ä¿®æ”¹æ—¶å°±è§¦å‘æœç´¢å›è°ƒã€‚å½“ç»„ä»¶èƒ½å¾ˆå¿«å¤„ç†æœç´¢ç»“æœæ—¶ï¼Œç”¨æˆ·ä¸ä¼šæ„Ÿè§‰åˆ°è¾“å…¥å»¶è¿Ÿã€‚")]),t._v(" "),a("p",[t._v("ä½†å®é™…åœºæ™¯ä¸­ï¼Œä¸­åå°åº”ç”¨çš„åˆ—è¡¨é¡µéå¸¸å¤æ‚ï¼Œç»„ä»¶å¯¹æœç´¢ç»“æœçš„ Render ä¼šé€ æˆé¡µé¢å¡é¡¿ï¼Œæ˜æ˜¾å½±å“åˆ°ç”¨æˆ·çš„è¾“å…¥ä½“éªŒã€‚")]),t._v(" "),a("p",[t._v("åœ¨æœç´¢åœºæ™¯ä¸­ä¸€èˆ¬ä½¿ç”¨ useDebounce[26] + useEffect çš„æ–¹å¼è·å–æ•°æ®ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useDebounce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use-debounce"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("debouncedValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDebounce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¹æ® debouncedValue è¿›è¡Œæœç´¢")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("debouncedValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input\n        defaultValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        onChange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Actual value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Debounce value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("debouncedValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br")])]),a("p",[t._v("ä¸ºä»€ä¹ˆæœç´¢åœºæ™¯ä¸­æ˜¯ä½¿ç”¨ debounceï¼Œè€Œä¸æ˜¯ throttle å‘¢ï¼Ÿthrottle æ˜¯ debounce çš„ç‰¹æ®Šåœºæ™¯ï¼Œthrottle ç»™ debounce ä¼ äº† maxWait å‚æ•°ï¼Œå¯å‚è€ƒ useThrottleCallback[28]ã€‚")]),t._v(" "),a("p",[t._v("åœ¨æœç´¢åœºæ™¯ä¸­ï¼Œåªéœ€å“åº”ç”¨æˆ·æœ€åä¸€æ¬¡è¾“å…¥ï¼Œæ— éœ€å“åº”ç”¨æˆ·çš„ä¸­é—´è¾“å…¥å€¼ï¼Œdebounce æ›´é€‚åˆä½¿ç”¨åœ¨è¯¥åœºæ™¯ä¸­ã€‚")]),t._v(" "),a("p",[t._v("è€Œ throttle æ›´é€‚åˆéœ€è¦å®æ—¶å“åº”ç”¨æˆ·çš„åœºæ™¯ä¸­æ›´é€‚åˆï¼Œå¦‚é€šè¿‡æ‹–æ‹½è°ƒæ•´å°ºå¯¸æˆ–é€šè¿‡æ‹–æ‹½è¿›è¡Œæ”¾å¤§ç¼©å°ï¼ˆå¦‚ï¼šwindow çš„ resize äº‹ä»¶ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("å®æ—¶å“åº”ç”¨æˆ·æ“ä½œåœºæ™¯ä¸­ï¼Œå¦‚æœå›è°ƒè€—æ—¶å°ï¼Œç”šè‡³å¯ä»¥ç”¨ requestAnimationFrame ä»£æ›¿ throttleã€‚")]),t._v(" "),a("ul",[a("li",[t._v("æ‡’åŠ è½½")])]),t._v(" "),a("p",[t._v("åœ¨ SPA ä¸­ï¼Œæ‡’åŠ è½½ä¼˜åŒ–ä¸€èˆ¬ç”¨äºä»ä¸€ä¸ªè·¯ç”±è·³è½¬åˆ°å¦ä¸€ä¸ªè·¯ç”±ã€‚")]),t._v(" "),a("p",[t._v("è¿˜å¯ç”¨äºç”¨æˆ·æ“ä½œåæ‰å±•ç¤ºçš„å¤æ‚ç»„ä»¶ï¼Œæ¯”å¦‚ç‚¹å‡»æŒ‰é’®åå±•ç¤ºçš„å¼¹çª—æ¨¡å—ï¼ˆæœ‰æ—¶å€™å¼¹çª—å°±æ˜¯ä¸€ä¸ªå¤æ‚é¡µé¢ ğŸ˜Œï¼‰ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œç»“åˆ Code Split æ”¶ç›Šè¾ƒé«˜ã€‚æ‡’åŠ è½½çš„å®ç°æ˜¯é€šè¿‡ Webpack çš„åŠ¨æ€å¯¼å…¥å’Œ React.lazy æ–¹æ³•ï¼Œå‚è€ƒä¾‹å­ lazy-loading[29]ã€‚")]),t._v(" "),a("p",[t._v("å®ç°æ‡’åŠ è½½ä¼˜åŒ–æ—¶ï¼Œä¸ä»…è¦è€ƒè™‘åŠ è½½æ€ï¼Œè¿˜éœ€è¦å¯¹åŠ è½½å¤±è´¥è¿›è¡Œå®¹é”™å¤„ç†ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" lazy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Suspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Component "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./styles.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯¹åŠ è½½å¤±è´¥è¿›è¡Œå®¹é”™å¤„ç†")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorBoundary")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hasError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDerivedStateFromError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hasError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hasError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("è¿™é‡Œå¤„ç†å‡ºé”™åœºæ™¯"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Comp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ¨¡æ‹Ÿç½‘ç»œå‡ºé”™"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Component"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("marginBottom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        å®ç°æ‡’åŠ è½½ä¼˜åŒ–æ—¶ï¼Œä¸ä»…è¦è€ƒè™‘åŠ è½½æ€ï¼Œè¿˜éœ€è¦å¯¹åŠ è½½å¤±è´¥è¿›è¡Œå®¹é”™å¤„ç†ã€‚\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ErrorBoundary"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Suspense fallback"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Loading..."')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Comp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Suspense"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ErrorBoundary"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br")])]),a("ul",[a("li",[t._v("æ‡’æ¸²æŸ“")])]),t._v(" "),a("p",[t._v("æ‡’æ¸²æŸ“æŒ‡å½“ç»„ä»¶è¿›å…¥æˆ–å³å°†è¿›å…¥å¯è§†åŒºåŸŸæ—¶æ‰æ¸²æŸ“ç»„ä»¶ã€‚å¸¸è§çš„ç»„ä»¶ Modal/Drawer ç­‰ï¼Œå½“ visible å±æ€§ä¸º true æ—¶æ‰æ¸²æŸ“ç»„ä»¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯æ‡’æ¸²æŸ“çš„ä¸€ç§å®ç°ã€‚æ‡’æ¸²æŸ“çš„ä½¿ç”¨åœºæ™¯æœ‰ï¼š")]),t._v(" "),a("p",[t._v("é¡µé¢ä¸­å‡ºç°å¤šæ¬¡çš„ç»„ä»¶ï¼Œä¸”ç»„ä»¶æ¸²æŸ“è´¹æ—¶ã€æˆ–è€…ç»„ä»¶ä¸­å«æœ‰æ¥å£è¯·æ±‚ã€‚å¦‚æœæ¸²æŸ“å¤šä¸ªå¸¦æœ‰è¯·æ±‚çš„ç»„ä»¶ï¼Œç”±äºæµè§ˆå™¨é™åˆ¶äº†åŒåŸŸåä¸‹å¹¶å‘è¯·æ±‚çš„æ•°é‡ï¼Œå°±å¯èƒ½ä¼šé˜»å¡å¯è§åŒºåŸŸå†…çš„å…¶ä»–ç»„ä»¶ä¸­çš„è¯·æ±‚ï¼Œå¯¼è‡´å¯è§åŒºåŸŸçš„å†…å®¹è¢«å»¶è¿Ÿå±•ç¤ºã€‚\néœ€ç”¨æˆ·æ“ä½œåæ‰å±•ç¤ºçš„ç»„ä»¶ã€‚è¿™ç‚¹å’Œæ‡’åŠ è½½ä¸€æ ·ï¼Œä½†æ‡’æ¸²æŸ“ä¸ç”¨åŠ¨æ€åŠ è½½æ¨¡å—ï¼Œä¸ç”¨è€ƒè™‘åŠ è½½æ€å’ŒåŠ è½½å¤±è´¥çš„å…œåº•å¤„ç†ï¼Œå®ç°ä¸Šæ›´ç®€å•ã€‚\næ‡’æ¸²æŸ“çš„å®ç°ä¸­åˆ¤æ–­ç»„ä»¶æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸå†…æ˜¯é€šè¿‡ react-visibility-observer[30] è¿›è¡Œç›‘å¬ã€‚ä¾‹å­å‚è€ƒï¼šæ‡’æ¸²æŸ“[31]")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" VisibilityObserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  useVisibilityObserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-visibility-observer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("VisibilityObserverChildren")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" isVisible "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useVisibilityObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isVisible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isVisible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("LazyRender")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isRendered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setIsRendered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isRendered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("VisibilityObserver rootMargin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0px 0px 0px 0px"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("VisibilityObserverChildren\n          callback"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("isVisible")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isVisible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIsRendered")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("VisibilityObserverChildren"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("VisibilityObserver"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸæ‰æ¸²æŸ“"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("æˆ‘æ˜¯ LazyRender ç»„ä»¶"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" LazyRender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br")])]),a("ul",[a("li",[t._v("è™šæ‹Ÿåˆ—è¡¨")])]),t._v(" "),a("p",[t._v("è™šæ‹Ÿåˆ—è¡¨æ˜¯æ‡’æ¸²æŸ“çš„ä¸€ç§ç‰¹æ®Šåœºæ™¯ã€‚è™šæ‹Ÿåˆ—è¡¨çš„ç»„ä»¶æœ‰ react-window[32] å’Œ react-virtualizedï¼Œå®ƒä»¬éƒ½æ˜¯åŒä¸€ä¸ªä½œè€…å¼€å‘çš„ã€‚")]),t._v(" "),a("p",[t._v("react-window æ˜¯ react-virtualized çš„è½»é‡ç‰ˆæœ¬ï¼Œå…¶ API å’Œæ–‡æ¡£æ›´åŠ å‹å¥½ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥æ–°é¡¹ç›®ä¸­æ¨èä½¿ç”¨ react-windowï¼Œè€Œä¸æ˜¯ä½¿ç”¨ Star æ›´å¤šçš„ react-virtualizedã€‚")]),t._v(" "),a("p",[t._v("ä½¿ç”¨ react-window å¾ˆç®€å•ï¼Œåªéœ€è¦è®¡ç®—æ¯é¡¹çš„é«˜åº¦å³å¯ã€‚ä¸‹é¢ä»£ç ä¸­æ¯ä¸€é¡¹çš„é«˜åº¦æ˜¯ 35pxã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" FixedSizeList "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" List "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-window"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Row")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" style "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Row "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Example")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("List\n    height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    itemCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    itemSize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯é¡¹çš„é«˜åº¦ä¸º 35")]),t._v("\n    width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("å¦‚æœæ¯é¡¹çš„é«˜åº¦æ˜¯å˜åŒ–çš„ï¼Œå¯ç»™ itemSize å‚æ•°ä¼ ä¸€ä¸ªå‡½æ•°ã€‚å¯¹äºè¿™ä¸ªä¼˜åŒ–ç‚¹ï¼Œç¬”è€…é‡åˆ°ä¸€ä¸ªçœŸå®æ¡ˆä¾‹ã€‚")]),t._v(" "),a("p",[t._v("åœ¨å…¬å¸çš„æ‹›è˜é¡¹ç›®ä¸­ï¼Œé€šè¿‡ä¸‹æ‹‰èœå•å¯æŸ¥çœ‹æŸä¸ªå€™é€‰äººçš„æ‰€æœ‰æŠ•é€’è®°å½•ã€‚å¹³å¸¸è¿™ä¸ªåˆ—è¡¨ä¹Ÿå°±å‡ åæ¡ï¼Œä½†åæ¥ç”¨æˆ·åé¦ˆã€ä¸‹æ‹‰èœå•ç‚¹å‡»åè¦å¾ˆä¹…æ‰èƒ½å±•ç¤ºå‡ºæŠ•é€’åˆ—è¡¨ã€ã€‚")]),t._v(" "),a("p",[t._v("è¯¥é—®é¢˜çš„åŸå› å°±æ˜¯è¿™ä¸ªå€™é€‰äººåœ¨æˆ‘ä»¬ç³»ç»Ÿä¸­æœ‰ä¸Šåƒæ¡æŠ•é€’ï¼Œä¸€æ¬¡æ€§å±•ç¤ºä¸Šåƒæ¡æŠ•é€’å¯¼è‡´é¡µé¢å¡ä½äº†ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°æ¥å£è¿”å›çš„æ˜¯æ‰€æœ‰æ•°æ®æ—¶ï¼Œéœ€æå‰é¢„é˜²è¿™ç±» bugï¼Œä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨ä¼˜åŒ–ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("è·³è¿‡å›è°ƒå‡½æ•°æ”¹å˜è§¦å‘çš„ Render è¿‡ç¨‹")])]),t._v(" "),a("p",[t._v("React ç»„ä»¶çš„ Props å¯ä»¥åˆ†ä¸ºä¸¤ç±»ã€‚")]),t._v(" "),a("p",[t._v("a) ä¸€ç±»æ˜¯åœ¨å¯¹ç»„ä»¶ Render æœ‰å½±å“çš„å±æ€§ï¼Œå¦‚ï¼šé¡µé¢æ•°æ®ã€getPopupContainer[34] å’Œ renderProps å‡½æ•°ã€‚")]),t._v(" "),a("p",[t._v("b) å¦ä¸€ç±»æ˜¯ç»„ä»¶ Render åçš„å›è°ƒå‡½æ•°ï¼Œå¦‚ï¼šonClickã€onVisibleChange[35]ã€‚")]),t._v(" "),a("p",[t._v("b) ç±»å±æ€§å¹¶ä¸å‚ä¸åˆ°ç»„ä»¶çš„ Render è¿‡ç¨‹ï¼Œå› ä¸ºå¯ä»¥å¯¹ b) ç±»å±æ€§è¿›è¡Œä¼˜åŒ–ã€‚")]),t._v(" "),a("p",[t._v("å½“ b)ç±»å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸è§¦å‘ç»„ä»¶çš„é‡æ–° Render ï¼Œè€Œæ˜¯åœ¨å›è°ƒè§¦å‘æ—¶è°ƒç”¨æœ€æ–°çš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),a("p",[t._v("Dan Abramov åœ¨ A Complete Guide to useEffect[36] æ–‡ç« ä¸­è®¤ä¸ºï¼Œæ¯æ¬¡ Render éƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å›è°ƒæ˜¯ä¸€ä»¶å¾ˆé…·çš„ç‰¹æ€§ã€‚")]),t._v(" "),a("p",[t._v("ä½†è¯¥ç‰¹æ€§è¦æ±‚æ¯æ¬¡å›è°ƒå‡½æ•°æ”¹å˜å°±è§¦å‘ç»„ä»¶çš„é‡æ–° Render ï¼Œè¿™åœ¨æ€§èƒ½ä¼˜åŒ–è¿‡ç¨‹ä¸­æ˜¯å¯ä»¥å–èˆçš„ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­å‚è€ƒï¼šè·³è¿‡å›è°ƒå‡½æ•°æ”¹å˜è§¦å‘çš„ Render è¿‡ç¨‹[37]ã€‚")]),t._v(" "),a("p",[t._v("ä»¥ä¸‹ä»£ç æ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œå¯é€šè¿‡è°ƒè¯•è¯¥ä¾‹å­ï¼Œå¸®åŠ©ç†è§£æ¶ˆåŒ–ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cloneElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" memo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useRef "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useDeepCompareMemo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use-deep-compare"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" omit "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lodash.omit"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" renderCnt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SkipNotRenderProps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" skips "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("skips"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤è·³è¿‡æ‰€æœ‰å›è°ƒå‡½æ•°")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("skips")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" child "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("only")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" childProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" child"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" propsRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextSkippedPropsRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("childProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("it")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("skips")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»£ç†å‡½æ•°åªä¼šç”Ÿæˆä¸€æ¬¡ï¼Œå…¶å€¼å§‹ç»ˆä¸å˜")]),t._v("\n      nextSkippedPropsRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n        nextSkippedPropsRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("skipNonRenderPropsProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          propsRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    propsRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" childProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œä½¿ç”¨ useMemo ä¼˜åŒ–æŠ€å·§")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é™¤å»å›è°ƒå‡½æ•°ï¼Œå…¶ä»–å±æ€§æ”¹å˜ç”Ÿæˆæ–°çš„ React.Element")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDeepCompareMemo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cloneElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("child"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("nextSkippedPropsRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("omit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("childProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextSkippedPropsRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SkipNotRenderPropsComp ç»„ä»¶å†…å®¹å’Œ Normal å†…å®¹ä¸€æ ·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SkipNotRenderPropsComp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onClick "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"case"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"caseHeader"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        è·³è¿‡ã€ä¸ Render æ— å…³çš„ Propsã€æ”¹å˜è§¦å‘çš„é‡æ–° Render\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      Render æ¬¡æ•°ä¸ºï¼š\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("renderCnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blue"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          ç‚¹æˆ‘å›è°ƒï¼Œå›è°ƒå¼¹å‡ºå€¼ä¸º "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("ï¼ˆä¼˜åŒ–æˆåŠŸï¼‰\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" SkipNotRenderPropsComp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br"),a("span",{staticClass:"line-number"},[t._v("60")]),a("br")])]),a("ul",[a("li",[t._v("åŠ¨ç”»åº“ç›´æ¥ä¿®æ”¹ DOM å±æ€§ï¼Œè·³è¿‡ç»„ä»¶ Render é˜¶æ®µ")])]),t._v(" "),a("p",[t._v("ä¸ªä¼˜åŒ–åœ¨ä¸šåŠ¡ä¸­åº”è¯¥ç”¨ä¸ä¸Šï¼Œä½†è¿˜æ˜¯éå¸¸å€¼å¾—å­¦ä¹ çš„ï¼Œå°†æ¥å¯ä»¥åº”ç”¨åˆ°ç»„ä»¶åº“ä¸­ã€‚")]),t._v(" "),a("p",[t._v("å‚è€ƒ react-spring[38] çš„åŠ¨ç”»å®ç°ï¼Œå½“ä¸€ä¸ªåŠ¨ç”»å¯åŠ¨åï¼Œæ¯æ¬¡åŠ¨ç”»å±æ€§æ”¹å˜ä¸ä¼šå¼•èµ·ç»„ä»¶é‡æ–° Render ï¼Œè€Œæ˜¯ç›´æ¥ä¿®æ”¹äº† dom ä¸Šç›¸å…³å±æ€§å€¼ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­æ¼”ç¤ºï¼šCodeSandbox åœ¨çº¿ Demo[39]")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useSpring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" animated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-spring"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./styles.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" renderCnt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Card")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flipped"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" transform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" opacity "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useSpring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("opacity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" flipped "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transform")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("perspective(600px) rotateX(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("flipped "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("deg)")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("config")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mass")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tension")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("friction")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°½ç®¡ opacity å’Œ transform çš„å€¼åœ¨åŠ¨ç”»æœŸé—´ä¸€ç›´å˜åŒ–")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½†æ˜¯å¹¶æ²¡æœ‰ç»„ä»¶çš„é‡æ–° Render")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fixed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("top")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("left")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        Render æ¬¡æ•°ï¼š\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("renderCnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("div\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c back"')]),t._v("\n        style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("opacity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" opacity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("interpolate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" transform "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("div\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c front"')]),t._v("\n        style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          opacity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transform")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" transform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("interpolate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("t")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(" rotateX(180deg)")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Card"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br")])]),a("ul",[a("li",[t._v("é¿å…åœ¨ didMountã€didUpdate ä¸­æ›´æ–°ç»„ä»¶ State")])]),t._v(" "),a("p",[t._v("è¿™ä¸ªæŠ€å·§ä¸ä»…ä»…é€‚ç”¨äº didMountã€didUpdateï¼Œè¿˜åŒ…æ‹¬ willUnmountã€useLayoutEffect å’Œç‰¹æ®Šåœºæ™¯ä¸‹çš„ useEffectï¼ˆå½“çˆ¶ç»„ä»¶çš„ cDU/cDM è§¦å‘æ—¶ï¼Œå­ç»„ä»¶çš„ useEffect ä¼šåŒæ­¥è°ƒç”¨ï¼‰ï¼Œæœ¬æ–‡ä¸ºå™è¿°æ–¹ä¾¿å°†ä»–ä»¬ç»Ÿç§°ä¸ºã€Œæäº¤é˜¶æ®µé’©å­ã€ã€‚")]),t._v(" "),a("p",[t._v("React å·¥ä½œæµ[40]æäº¤é˜¶æ®µçš„ç¬¬äºŒæ­¥å°±æ˜¯æ‰§è¡Œæäº¤é˜¶æ®µé’©å­ï¼Œå®ƒä»¬çš„æ‰§è¡Œä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°é¡µé¢ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœåœ¨æäº¤é˜¶æ®µé’©å­å‡½æ•°ä¸­æ›´æ–°ç»„ä»¶ Stateï¼Œä¼šå†æ¬¡è§¦å‘ç»„ä»¶çš„æ›´æ–°æµç¨‹ï¼Œé€ æˆä¸¤å€è€—æ—¶ã€‚ä¸€èˆ¬åœ¨æäº¤é˜¶æ®µçš„é’©å­ä¸­æ›´æ–°ç»„ä»¶çŠ¶æ€çš„åœºæ™¯æœ‰ï¼š")]),t._v(" "),a("p",[t._v("è®¡ç®—å¹¶æ›´æ–°ç»„ä»¶çš„æ´¾ç”ŸçŠ¶æ€ï¼ˆDerived Stateï¼‰ã€‚åœ¨è¯¥åœºæ™¯ä¸­ï¼Œç±»ç»„ä»¶åº”ä½¿ç”¨ getDerivedStateFromProps[41] é’©å­æ–¹æ³•ä»£æ›¿ï¼Œå‡½æ•°ç»„ä»¶åº”ä½¿ç”¨å‡½æ•°è°ƒç”¨æ—¶æ‰§è¡Œ setState[42]çš„æ–¹å¼ä»£æ›¿ã€‚ä½¿ç”¨ä¸Šé¢ä¸¤ç§æ–¹å¼åï¼ŒReact ä¼šå°†æ–°çŠ¶æ€å’Œæ´¾ç”ŸçŠ¶æ€åœ¨ä¸€æ¬¡æ›´æ–°å†…å®Œæˆã€‚\næ ¹æ® DOM ä¿¡æ¯ï¼Œä¿®æ”¹ç»„ä»¶çŠ¶æ€ã€‚åœ¨è¯¥åœºæ™¯ä¸­ï¼Œé™¤éæƒ³åŠæ³•ä¸ä¾èµ– DOM ä¿¡æ¯ï¼Œå¦åˆ™ä¸¤æ¬¡æ›´æ–°è¿‡ç¨‹æ˜¯å°‘ä¸äº†çš„ï¼Œå°±åªèƒ½ç”¨å…¶ä»–ä¼˜åŒ–æŠ€å·§äº†ã€‚\nuse-swr çš„æºç [43]å°±ä½¿ç”¨äº†è¯¥ä¼˜åŒ–æŠ€å·§ã€‚å½“æŸä¸ªæ¥å£å­˜åœ¨ç¼“å­˜æ•°æ®æ—¶ï¼Œuse-swr ä¼šå…ˆä½¿ç”¨è¯¥æ¥å£çš„ç¼“å­˜æ•°æ®ï¼Œå¹¶åœ¨ requestIdleCallback æ—¶å†é‡æ–°å‘èµ·è¯·æ±‚ï¼Œè·å–æœ€æ–°æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœ use-swr ä¸åšè¯¥ä¼˜åŒ–çš„è¯ï¼Œå°±ä¼šåœ¨ useLayoutEffect ä¸­è§¦å‘é‡æ–°éªŒè¯å¹¶è®¾ç½® isValidating çŠ¶æ€ä¸º true[44]ï¼Œå¼•èµ·ç»„ä»¶çš„æ›´æ–°æµç¨‹ï¼Œé€ æˆæ€§èƒ½æŸå¤±ã€‚")]),t._v(" "),a("h3",{attrs:{id:"react-profiler-å®šä½-render-è¿‡ç¨‹ç“¶é¢ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-profiler-å®šä½-render-è¿‡ç¨‹ç“¶é¢ˆ"}},[t._v("#")]),t._v(" React Profiler å®šä½ Render è¿‡ç¨‹ç“¶é¢ˆ")]),t._v(" "),a("p",[t._v("React Profiler æ˜¯ React å®˜æ–¹æä¾›çš„æ€§èƒ½å®¡æŸ¥å·¥å…·ï¼Œæœ¬æ–‡åªä»‹ç»ç¬”è€…çš„ä½¿ç”¨å¿ƒå¾—ï¼Œè¯¦ç»†çš„ä½¿ç”¨æ‰‹å†Œè¯·ç§»æ­¥å®˜ç½‘æ–‡æ¡£[45]ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("Profiler åªè®°å½•äº† Render è¿‡ç¨‹è€—æ—¶")])]),t._v(" "),a("p",[t._v("é€šè¿‡ React Profilerï¼Œå¼€å‘è€…å¯ä»¥æŸ¥çœ‹ç»„ä»¶ Render è¿‡ç¨‹è€—æ—¶ï¼Œä½†æ— æ³•çŸ¥æ™“æäº¤é˜¶æ®µçš„è€—æ—¶ã€‚")]),t._v(" "),a("p",[t._v("å°½ç®¡ Profiler é¢æ¿ä¸­æœ‰ Committed at å­—æ®µï¼Œä½†è¿™ä¸ªå­—æ®µæ˜¯ç›¸å¯¹äºå½•åˆ¶å¼€å§‹æ—¶é—´ï¼Œæ ¹æœ¬æ²¡æœ‰æ„ä¹‰ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥æé†’è¯»è€…ä¸è¦é€šè¿‡ Profiler å®šä½é Render è¿‡ç¨‹çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("é€šè¿‡åœ¨ React v16 ç‰ˆæœ¬ä¸Šè¿›è¡Œå®éªŒï¼ŒåŒæ—¶å¼€å¯ Chrome çš„ Performance å’Œ React Profiler ç»Ÿè®¡ã€‚")]),t._v(" "),a("p",[t._v("å¦‚ä¸‹å›¾ï¼Œåœ¨ Performance é¢æ¿ä¸­ï¼Œè°ƒå’Œé˜¶æ®µå’Œæäº¤é˜¶æ®µè€—æ—¶åˆ†åˆ«ä¸º 642ms å’Œ 300msï¼Œè€Œ Profiler é¢æ¿ä¸­åªæ˜¾ç¤ºäº† 642msã€‚\n"),a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/iagNW4Zy9Cyb3fryIqOibONnxEKQSxKqlDBsytU93D3RVMuqCaWtbRPZ1VywFGHWvbfyTPtBML5s85LAh6tZpnZw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:""}})]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("æ‹“å±•çŸ¥è¯†\nReact åœ¨ v17 ç‰ˆæœ¬åå·²ç§»é™¤ User Timing ç»Ÿè®¡åŠŸèƒ½ï¼Œå…·ä½“åŸå› å¯å‚è€ƒ PR#18417[46]ã€‚\nåœ¨ v17 ç‰ˆæœ¬ä¸Šï¼Œç¬”è€…ä¹Ÿé€šè¿‡æµ‹è¯•ä»£ç [47]éªŒè¯äº† Profiler ä¸­çš„ç»Ÿè®¡ä¿¡æ¯å¹¶ä¸åŒ…å«æäº¤é˜¶æ®µï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥çœ‹çœ‹ã€‚")])]),t._v(" "),a("ul",[a("li",[t._v("å¼€å¯ã€Œè®°å½•ç»„ä»¶æ›´æ–°åŸå› ã€")])]),t._v(" "),a("p",[t._v("ç‚¹å‡»é¢æ¿ä¸Šçš„é½¿è½®ï¼Œç„¶åå‹¾é€‰ã€ŒRecord why each component rendered while profiling.ã€ï¼Œå¦‚ä¸‹å›¾ã€‚\n"),a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_jpg/iagNW4Zy9Cyb3fryIqOibONnxEKQSxKqlDAbsO6zYLib3qRfwh5KyjQoZXFgFe2fdNb5YMvA9j9seBLfia5mYtFzNw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å¼€å¯ã€Œè®°å½•ç»„ä»¶æ›´æ–°åŸå› ã€"}}),t._v("\nç„¶åç‚¹å‡»é¢æ¿ä¸­çš„è™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼Œå³ä¾§ä¾¿ä¼šå±•ç¤ºè¯¥ç»„ä»¶é‡æ–° Render çš„åŸå› ã€‚\n"),a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_jpg/iagNW4Zy9Cyb3fryIqOibONnxEKQSxKqlDAbsO6zYLib3qRfwh5KyjQoZXFgFe2fdNb5YMvA9j9seBLfia5mYtFzNw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("å®šä½äº§ç”Ÿæœ¬æ¬¡ Render è¿‡ç¨‹åŸå› ")])]),t._v(" "),a("p",[t._v("ç”±äº React çš„æ‰¹é‡æ›´æ–°ï¼ˆBatch Updateï¼‰æœºåˆ¶ï¼Œäº§ç”Ÿä¸€æ¬¡ Render è¿‡ç¨‹å¯èƒ½æ¶‰åŠåˆ°å¾ˆå¤šä¸ªç»„ä»¶çš„çŠ¶æ€æ›´æ–°ã€‚é‚£ä¹ˆå¦‚ä½•å®šä½æ˜¯å“ªäº›ç»„ä»¶çŠ¶æ€æ›´æ–°å¯¼è‡´çš„å‘¢ï¼Ÿ")]),t._v(" "),a("p",[t._v("åœ¨ Profiler é¢æ¿å·¦ä¾§çš„è™šæ‹Ÿ DOM æ ‘ç»“æ„ä¸­ï¼Œä»ä¸Šåˆ°ä¸‹å®¡æŸ¥æ¯ä¸ªå‘ç”Ÿäº†æ¸²æŸ“çš„ï¼ˆä¸ä¼šç°è‰²çš„ï¼‰ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœç»„ä»¶æ˜¯ç”±äº State æˆ– Hook æ”¹å˜è§¦å‘äº† Render è¿‡ç¨‹ï¼Œé‚£å®ƒå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ç»„ä»¶ï¼Œå¦‚ä¸‹å›¾ã€‚\n"),a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/iagNW4Zy9Cyb3fryIqOibONnxEKQSxKqlDocKckWgK1lnHhxs1UcZ1j4QFodtXV9UD9Dbhmiavq95EtCnqcpLXk5w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å®šä½äº§ç”Ÿæœ¬æ¬¡ Render è¿‡ç¨‹åŸå› "}})]),t._v(" "),a("h4",{attrs:{id:"å‚è€ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[t._v("#")]),t._v(" å‚è€ƒ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/C8_xenJWDJrqLoycXttzbA",target:"_blank",rel:"noopener noreferrer"}},[t._v("React æ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/book/6945998773818490884/section/6958058637042384900",target:"_blank",rel:"noopener noreferrer"}},[t._v("React è¿›é˜¶å®è·µæŒ‡å—"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6844903865926549511#heading-0",target:"_blank",rel:"noopener noreferrer"}},[t._v("æµ…è°ˆReactæ€§èƒ½ä¼˜åŒ–çš„æ–¹å‘"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);s.default=e.exports}}]);