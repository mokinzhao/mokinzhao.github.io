(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{650:function(s,a,t){"use strict";t.r(a);var e=t(16),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"bff-基本概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bff-基本概念"}},[s._v("#")]),s._v(" BFF 基本概念")]),s._v(" "),t("ul",[t("li",[s._v("BFF")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("❝ 在聊Serverless之前跟大家先谈谈"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v("，"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v("顾名思义就是Backend For Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("用中文解释就是服务于前端的后端，那么为什么会有"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v("？\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-f8bcee61494684bb6247b1239395c61d_720w.png",alt:""}})]),s._v(" "),t("p",[s._v("前端同学和后端同学都各有各的道理，有没有一种解决方案可以化解这种尴尬的场景，于是就有了BFF")]),s._v(" "),t("p",[s._v("1.1 介绍")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("❝ "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v("层初衷是在后台服务与前端（客户端）之间添加一层，接下来我们来看看下面这张图\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-f42f434797a857b7e1ee35c4a8bf4376_720w.jpg",alt:""}})]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("❝ 啊宽同学提问：那"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v("到底发挥什么作用？\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("答案是：用户体验适配层和API聚合层 : 主要负责快速跟进 UI 迭代，对后 端接口服务进行组合、处理，对数据进行：裁剪、格式化、聚合等")]),s._v(" "),t("p",[s._v("在BFF层下面是各种后端微服务，在BFF上层则是各种前端应用（多端应用），向下调用后端为服务，向上给客户端提供接口服务，后端为BFF层的前端提供的的 RPC 接口， BFF 层则直接调用服务端 RPC 接口拿到数据，按需加工数据，来完成整个BFF的闭环（以Node+GraphQL技术栈为主）")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("❝ 啊呆同学提问：那"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v("层谁来开发？\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("遵循服务自治，谁使用谁开发的原则，也就意味着只能由前端同学来挑起这个重任，同时着离“全栈工程师”又进一步了。不知道 ‍♂️ 是应该庆幸还是苦恼咯")]),s._v(" "),t("p",[s._v("BFF是否可以由后端来做？当然可以，只是说带来新的问题，就总是包接口，会导致个人能力提升受限")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("❝ 啊宇同学提问：你是不是漏了api网关？\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这个问题好 BFF和网关Gateway都是微服务架构中的重要的两个概念,看下图简单的例子")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-49e8e578715bfa4b05fd43ac38f8520e_720w.jpg",alt:""}})]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("❝ 分享一下蚂蚁金服体验技术部负责人玉伯，曾说的一句话：“"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v(" 模式不仅仅是一种技术架构，从社会分工角度讲，"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BFF")]),s._v(" 更是一种多元价值导向的分层架构”\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("BFF的优势")])]),s._v(" "),t("ol",[t("li",[s._v("可以降低沟通成本：后端同学追求解耦，希望客户端应用和内部微服务不耦合，通过引入BFF这中间层，使得两边可以独立变化")]),s._v(" "),t("li",[s._v("多端应用适配：展示不同的（或更少量的）数据，比如PC端页面设计的API需要支持移动端，发现现有接口从设计到实现都与桌面UI展示 需求强相关，无法简单适应移动端的展示需求 ，就好比PC端一个新闻推荐接口，接口字段PC端都需要，而移动端呢H5不需要，这个时候根据不同终端在BFF层做调整，同时也可以进行不同的（或更少的）API调用（聚合）来减少http请求")])]),s._v(" "),t("ul",[t("li",[s._v("BFF的痛点")])]),s._v(" "),t("ol",[t("li",[s._v("重复开发：每个设备开发一个 BFF 应用，也会面临一些重复开发的问题展示，增加开发成本")]),s._v(" "),t("li",[s._v("维护问题：需要维护各种 BFF 应用。以往前端也不需要关心并发，现在并发压力却集中到了 BFF 上")]),s._v(" "),t("li",[s._v("链路复杂：流程变得繁琐，BFF引入后，要同时走前端、服务端的研发流程，多端发布、互相依赖，导致流程繁琐")]),s._v(" "),t("li",[s._v("浪费资源: BFF层多了，资源占用就成了问题，会浪费资源，除非有弹性伸缩扩容")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-f90a9d02ce6c1a3b3e2f9f8ace148e4a_720w.jpg",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("1.4 有什么方案可以解决传统BFF痛点？")])]),s._v(" "),t("ol",[t("li",[s._v("包括解决前端需要关心应用的负载均衡、备份冗灾、监控报警等一些列运维部署的操作")]),s._v(" "),t("li",[s._v("如何统一管理和运维，提高发布速度、降低运维成本")]),s._v(" "),t("li",[s._v("使用ServerLess")])])])}),[],!1,null,null,null);a.default=n.exports}}]);