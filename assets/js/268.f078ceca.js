(window.webpackJsonp=window.webpackJsonp||[]).push([[268],{688:function(a,t,v){"use strict";v.r(t);var _=v(16),r=Object(_.a)({},(function(){var a=this,t=a.$createElement,v=a._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[v("h1",{attrs:{id:"技术栈分层"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#技术栈分层"}},[a._v("#")]),a._v(" 技术栈分层")]),a._v(" "),v("h2",{attrs:{id:"native"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#native"}},[a._v("#")]),a._v(" Native")]),a._v(" "),v("h3",{attrs:{id:"优点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[a._v("#")]),a._v(" 优点")]),a._v(" "),v("p",[a._v("操作体验流畅、性能好、数据存储较安全")]),a._v(" "),v("h3",{attrs:{id:"缺点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[a._v("#")]),a._v(" 缺点")]),a._v(" "),v("p",[a._v("发版周期长、频繁下周更新、线上故障修复及时度低")]),a._v(" "),v("h3",{attrs:{id:"适用场景"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#适用场景"}},[a._v("#")]),a._v(" 适用场景")]),a._v(" "),v("ul",[v("li",[a._v("原生动画、原生API（相机、蓝牙）")]),a._v(" "),v("li",[a._v("多媒体、音视频")]),a._v(" "),v("li",[a._v("数据加密、存储（JNI）")])]),a._v(" "),v("h2",{attrs:{id:"reactnative"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#reactnative"}},[a._v("#")]),a._v(" ReactNative")]),a._v(" "),v("h3",{attrs:{id:"优点-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#优点-2"}},[a._v("#")]),a._v(" 优点")]),a._v(" "),v("p",[a._v("有热更新能力、跨平台、支持前端编码")]),a._v(" "),v("h3",{attrs:{id:"缺点-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#缺点-2"}},[a._v("#")]),a._v(" 缺点")]),a._v(" "),v("p",[a._v("操作体验一般，流畅度一般")]),a._v(" "),v("h3",{attrs:{id:"适用场景-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#适用场景-2"}},[a._v("#")]),a._v(" 适用场景")]),a._v(" "),v("ul",[v("li",[a._v("主流程、核心支付、下单模块")])]),a._v(" "),v("h2",{attrs:{id:"h5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#h5"}},[a._v("#")]),a._v(" H5")]),a._v(" "),v("h3",{attrs:{id:"h5特点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#h5特点"}},[a._v("#")]),a._v(" H5特点")]),a._v(" "),v("p",[a._v("体验流畅度较弱、灵活、高效、发布便捷")]),a._v(" "),v("h3",{attrs:{id:"适用场景-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#适用场景-3"}},[a._v("#")]),a._v(" 适用场景")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("运营活动")])]),a._v(" "),v("li",[v("p",[a._v("内置商城")])])]),a._v(" "),v("h1",{attrs:{id:"整体优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#整体优化"}},[a._v("#")]),a._v(" 整体优化")]),a._v(" "),v("h2",{attrs:{id:"rn-native-优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#rn-native-优化"}},[a._v("#")]),a._v(" RN/Native 优化")]),a._v(" "),v("h3",{attrs:{id:"rn-native耗时"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#rn-native耗时"}},[a._v("#")]),a._v(" RN/Native耗时")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("耗时链路：Click->startActivity-> WebView初始化->loadUrl")])]),a._v(" "),v("li",[v("p",[a._v("耗时占比：15%")])])]),a._v(" "),v("h3",{attrs:{id:"优化措施"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#优化措施"}},[a._v("#")]),a._v(" 优化措施")]),a._v(" "),v("ul",[v("li",[a._v("预加载（WebView预初始化）")]),a._v(" "),v("li",[a._v("CodeCache（缓存）")]),a._v(" "),v("li",[a._v("bundle体积优化\n"),v("ul",[v("li",[a._v("Tree Shaking")]),a._v(" "),v("li",[a._v("按需加载打包")])])]),a._v(" "),v("li",[a._v("懒加载\n"),v("ul",[v("li",[a._v("RAMbundle")])])])]),a._v(" "),v("h2",{attrs:{id:"网络优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#网络优化"}},[a._v("#")]),a._v(" 网络优化")]),a._v(" "),v("h3",{attrs:{id:"网络耗时链路"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#网络耗时链路"}},[a._v("#")]),a._v(" 网络耗时链路")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("耗时链路：DNS->TCP->Request->Response")])]),a._v(" "),v("li",[v("p",[a._v("耗时占比：50%")])])]),a._v(" "),v("h3",{attrs:{id:"网络优化措施"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#网络优化措施"}},[a._v("#")]),a._v(" 网络优化措施")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("请求前置")])]),a._v(" "),v("li",[v("p",[a._v("并行请求")])]),a._v(" "),v("li",[v("p",[a._v("网络缓存（强缓存/协商缓存）")])]),a._v(" "),v("li",[v("p",[a._v("借用原生请求(okHttp)")])]),a._v(" "),v("li",[v("p",[a._v("浏览器标签")]),a._v(" "),v("ul",[v("li",[a._v("dns-prefetch")]),a._v(" "),v("li",[a._v("prefetch")]),a._v(" "),v("li",[a._v("preconnect（受限）")]),a._v(" "),v("li",[a._v("prerender(受限)")])])])]),a._v(" "),v("h2",{attrs:{id:"渲染优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#渲染优化"}},[a._v("#")]),a._v(" 渲染优化")]),a._v(" "),v("h3",{attrs:{id:"渲染耗时链路"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#渲染耗时链路"}},[a._v("#")]),a._v(" 渲染耗时链路")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("耗时链路：解析->布局->渲染->首屏绘制")])]),a._v(" "),v("li",[v("p",[a._v("耗时占比：35%")])])]),a._v(" "),v("h3",{attrs:{id:"渲染优化措施"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#渲染优化措施"}},[a._v("#")]),a._v(" 渲染优化措施")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("分布渲染（只渲染视口内）")])]),a._v(" "),v("li",[v("p",[a._v("NSR/SSR同构/骨架屏")])])]),a._v(" "),v("h2",{attrs:{id:"综合优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#综合优化"}},[a._v("#")]),a._v(" 综合优化")]),a._v(" "),v("h3",{attrs:{id:"内存优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#内存优化"}},[a._v("#")]),a._v(" 内存优化")]),a._v(" "),v("ul",[v("li",[a._v("容器费用")]),a._v(" "),v("li",[a._v("预创建")]),a._v(" "),v("li",[a._v("资源预取")]),a._v(" "),v("li",[a._v("空间换时间（内存大）")]),a._v(" "),v("li",[a._v("时间换空间（内存小）")])]),a._v(" "),v("h3",{attrs:{id:"缓存体系"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#缓存体系"}},[a._v("#")]),a._v(" 缓存体系")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("MemoryCache")])]),a._v(" "),v("li",[v("p",[a._v("DiskCache")])])]),a._v(" "),v("p",[a._v("CSS、Html、JS")]),a._v(" "),v("ul",[v("li",[a._v("ContentCache")])]),a._v(" "),v("p",[a._v("单View多Page")]),a._v(" "),v("ul",[v("li",[a._v("Multi-WebView")])]),a._v(" "),v("h3",{attrs:{id:"获取首屏时间"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#获取首屏时间"}},[a._v("#")]),a._v(" 获取首屏时间")]),a._v(" "),v("ol",[v("li",[a._v("开启MutationObserve")]),a._v(" "),v("li",[a._v("检测首屏外节点变动")]),a._v(" "),v("li",[a._v("次数超过阀值")]),a._v(" "),v("li",[a._v("关闭Mutation")]),a._v(" "),v("li",[a._v("计算首屏时间")])]),a._v(" "),v("h2",{attrs:{id:"参考"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),v("p",[v("a",{attrs:{href:"https://mp.weixin.qq.com/s/23ZFPK4CaCkinwpZ3SG9Rw",target:"_blank",rel:"noopener noreferrer"}},[a._v("得物AppH5秒开优化实战"),v("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);